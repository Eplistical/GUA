(function(e){function t(t){for(var i,n,r=t[0],o=t[1],d=t[2],p=0,u=[];p<r.length;p++)n=r[p],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&u.push(s[n][0]),s[n]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i]);c&&c(t);while(u.length)u.shift()();return l.push.apply(l,d||[]),a()}function a(){for(var e,t=0;t<l.length;t++){for(var a=l[t],i=!0,r=1;r<a.length;r++){var o=a[r];0!==s[o]&&(i=!1)}i&&(l.splice(t--,1),e=n(n.s=a[0]))}return e}var i={},s={app:0},l=[];function n(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=i,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/GUA/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],o=r.push.bind(r);r.push=t,r=r.slice();for(var d=0;d<r.length;d++)t(r[d]);var c=o;l.push([1,"chunk-vendors"]),a()})({0:function(e,t){},"034f":function(e,t,a){"use strict";var i=a("85ec"),s=a.n(i);s.a},1:function(e,t,a){e.exports=a("56d7")},2:function(e,t){},3:function(e,t){},"33f0":function(e,t,a){e.exports=a.p+"img/android-chrome-192x192.8c6d0221.png"},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("0cdd");var i=a("2b0e"),s=a("5f5b"),l=a("b1e0");a("f9e3"),a("2dd8"),a("ab8b");i["default"].use(s["b"]);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("BillSpliter")],1)},r=[],o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.env.mobile?i("b-container",{attrs:{fluid:""}},[i("b-alert",{staticClass:"position-fixed fixed-top mt-1 mx-2 rounded-3",attrs:{variant:e.alert.main.variant,show:e.alert.main.countDown,dismissible:"",fade:""},on:{"dismiss-count-down":e.onAlertMainCountDownChanged}},[e._v(" "+e._s(e.alert.main.message)+" ")]),i("b-modal",{attrs:{title:e.modalMobileEditTitle,"ok-only":"","header-bg-variant":"dark","header-text-variant":"light"},on:{hidden:e.onCloseModalMobileEditHandler},model:{value:e.modal.mobileEdit.show,callback:function(t){e.$set(e.modal.mobileEdit,"show",t)},expression:"modal.mobileEdit.show"}},[void 0!==e.modal.mobileEdit.itemIndex?i("b-container",{attrs:{fluid:"",setItemIndex:e.itemIndex=e.modal.mobileEdit.itemIndex,setItem:e.item=e.input.items[e.itemIndex]}},[i("b-row",{staticClass:"mt-2"},[i("b-col",{attrs:{cols:"3"}},[i("b",[e._v("Name")])]),i("b-col",[i("b-form-input",{attrs:{type:"text",formatter:e.itemNameFormatter},model:{value:e.item.name,callback:function(t){e.$set(e.item,"name",t)},expression:"item.name"}})],1)],1),i("b-row",{staticClass:"mt-2"},[i("b-col",{attrs:{cols:"3"}},[i("b",[e._v("Cost")])]),i("b-col",[i("b-form-input",{attrs:{type:"number","lazy-formatter":"",formatter:e.itemCostFormatter},model:{value:e.item.cost,callback:function(t){e.$set(e.item,"cost",t)},expression:"item.cost"}})],1)],1),i("b-row",{staticClass:"mt-2"},[i("b-col",{attrs:{cols:"3"}},[i("b",[e._v("Taxed")])]),i("b-col",[i("b-checkbox",{attrs:{switch:"",size:"lg"},model:{value:e.item.taxed,callback:function(t){e.$set(e.item,"taxed",t)},expression:"item.taxed"}})],1)],1),i("b-container",{staticClass:"mt-2",attrs:{fluid:""}},[i("b-tabs",[0==e.people.idList.length?i("div",{staticClass:"text-warning h5"},[e._v(" No people available. Please add people first. ")]):e._e(),i("b-tab",{attrs:{active:""},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Claim ")]},proxy:!0}],null,!1,3603964215)},e._l(e.people.idList,(function(t,a){return i("b-row",{key:a,staticClass:"mt-2"},[i("b-col",{attrs:{cols:"6"}},[i("b-avatar",{class:e.people.details[t].personClass,attrs:{text:e.people.details[t].initial}})],1),i("b-col",[i("CounterWidget",{attrs:{size:"md",min:0,max:100},model:{value:e.people.details[t].claim[e.itemIndex],callback:function(a){e.$set(e.people.details[t].claim,e.itemIndex,a)},expression:"people.details[personId].claim[itemIndex]"}})],1)],1)})),1),e.input.enablePaidByMode?i("b-tab",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Paid ")]},proxy:!0}],null,!1,1334269665)},e._l(e.people.idList,(function(t,a){return i("b-row",{key:a,staticClass:"mt-2"},[i("b-col",{attrs:{cols:"6"}},[i("b-avatar",{class:e.people.details[t].personClass,attrs:{text:e.people.details[t].initial}})],1),i("b-col",[i("CounterWidget",{attrs:{size:"md",min:0,max:100},model:{value:e.people.details[t].paid[e.itemIndex],callback:function(a){e.$set(e.people.details[t].paid,e.itemIndex,a)},expression:"people.details[personId].paid[itemIndex]"}})],1)],1)})),1):e._e()],1)],1)],1):e._e()],1),i("b-row",{staticClass:"text-primary text-left"},[i("b-col",{staticClass:"text-left"},[i("span",[i("b-img",{attrs:{src:a("33f0"),width:"64px",button:"",height:"64px"},on:{click:e.onDummyClickedHandler}})],1),i("span",{staticClass:"text-left mt-2 ml-3"},[i("span",{staticClass:"ml-2"},[i("b-avatar",{attrs:{variant:"primary",icon:"plus",button:""},on:{click:function(t){return e.onAddItemHandler(!0)}}})],1),i("span",{staticClass:"ml-2"},[i("b-avatar",{attrs:{variant:"success",icon:"play-fill",button:""},on:{click:e.onCalculateHandler}})],1),i("span",{staticClass:"ml-2"},[i("b-avatar",{attrs:{variant:"danger",icon:"trash-fill",button:""},on:{click:e.resetAll}})],1)])])],1),i("b-tabs",{staticClass:"mt-2"},[i("b-tab",{attrs:{active:""},scopedSlots:e._u([{key:"title",fn:function(){return[i("b-icon",{attrs:{icon:"basket-fill"}}),e._v(" Items ")]},proxy:!0}])},[i("b-row",{staticClass:"mt-2"},[i("b-col",{staticClass:"mr-2",attrs:{cols:"1"}},[i("label",{staticClass:"h5 mt-1"},[e._v("Tax")])]),i("b-col",{attrs:{cols:"5"}},[i("CounterWidget",{attrs:{min:0,max:100},on:{input:function(t){e.result.dirty=!0}},model:{value:e.input.taxRate,callback:function(t){e.$set(e.input,"taxRate",t)},expression:"input.taxRate"}})],1),i("b-col",{attrs:{cols:"1"}}),i("b-col",{staticClass:"text-right",attrs:{cols:"2"}},[i("label",{staticClass:"h5 mt-1"},[e._v("PaidBy")])]),i("b-col",{staticClass:"text-left"},[i("b-checkbox",{attrs:{switch:"",size:"lg"},on:{change:function(t){e.result.dirty=!0}},model:{value:e.input.enablePaidByMode,callback:function(t){e.$set(e.input,"enablePaidByMode",t)},expression:"input.enablePaidByMode"}})],1)],1),i("b-row",{staticClass:"mt-2 h4"},[i("b-col",{attrs:{cols:"6"}},[i("b-avatar-group",{attrs:{size:"sm"}},e._l(e.people.idList,(function(t,a){return i("b-avatar",{key:a,class:e.people.details[t].personClass,attrs:{text:e.people.details[t].initial}})})),1)],1)],1),i("div",{staticClass:"mt-1"},[i("b-table",{attrs:{striped:"",hover:"","sticky-header":"360px","no-border-collapse":!0,items:e.input.items,fields:e.input.fieldsMobile},on:{"row-clicked":function(t){return e.$set(t,"_showDetails",!t._showDetails)}},scopedSlots:e._u([{key:"cell(name)",fn:function(t){return[e._v(" "+e._s(t.item.name)+" ")]}},{key:"cell(cost)",fn:function(t){return[t.item.taxed?i("b-badge",{attrs:{pill:"",variant:"info"}},[e._v(" T ")]):e._e(),e._v(" "+e._s(t.item.cost)+" ")]}},{key:"cell(action)",fn:function(t){return[i("span",{staticClass:"mx-1"},[i("b-button",{attrs:{variant:"danger",size:"sm"},on:{click:function(a){return e.onDeleteItemHandler(t.index)}}},[i("b-icon",{attrs:{icon:"trash"}})],1)],1),i("span",{staticClass:"mx-1"},[i("b-button",{attrs:{variant:"primary",size:"sm"},on:{click:function(a){return e.onOpenModalMobileEditHandler(t.index)}}},[i("b-icon",{attrs:{icon:"pencil-square"}})],1)],1)]}},{key:"row-details",fn:function(t){return[i("b-card",{staticClass:"text-left"},[i("b-row",{staticClass:"mt-1"},[i("b-col",{staticClass:"text-sm-right",attrs:{cols:"3"}},[i("b",[e._v("Claim:")])]),i("b-col",[i("b-avatar-group",{attrs:{size:"sm"}},e._l(e.people.idList,(function(a,s){return e.getItemClaimShare(a,t.index,String)>0?i("b-avatar",{key:s,class:e.people.details[a].personClass,attrs:{"badge-left":"","badge-top":"",badge:e.getItemClaimShare(a,t.index,String),text:e.people.details[a].initial}}):e._e()})),1)],1)],1),i("b-row",{staticClass:"mt-1"},[i("b-col",{staticClass:"text-sm-right",attrs:{cols:"3"}},[i("b",[e._v("Paid:")])]),i("b-col",[i("b-avatar-group",{attrs:{size:"sm"}},e._l(e.people.idList,(function(a,s){return e.getItemPaidShare(a,t.index,String)>0?i("b-avatar",{key:s,class:e.people.details[a].personClass,attrs:{"badge-left":"","badge-top":"",badge:e.getItemPaidShare(a,t.index,String),text:e.people.details[a].initial}}):e._e()})),1)],1)],1)],1)]}}])})],1),0==e.input.items.length?i("div",{staticClass:"mb-2"},[i("form",{staticClass:"mb-2"},[i("div",{ref:"fileinputzone",staticClass:"text-center fileInputZone mt-4",on:{drop:e.onDropFileHandler,dragenter:e.onDragEnterHandler,dragover:e.suppressAction,dragleave:e.onDragLeaveHandler}},[i("div",{staticClass:"my-2"},[i("svg",{staticClass:"bi bi-upload mt-4",attrs:{width:"4em",height:"4em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{"fill-rule":"evenodd",d:"M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"}}),i("path",{attrs:{"fill-rule":"evenodd",d:"M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z"}})])]),i("div",[i("input",{ref:"importfile",attrs:{type:"file",accept:e.acceptFiles},on:{change:e.onImportFileHandler}}),i("h2",[e._v("Upload .xlsx")])])])]),i("span",{staticClass:"mx-1"},[i("b-button",{attrs:{variant:"primary"},on:{click:e.onExampleInputHandler}},[e._v(" Example Input File ")])],1)]):e._e(),0==e.input.items.length?i("div"):e._e()],1),i("b-tab",{scopedSlots:e._u([{key:"title",fn:function(){return[i("b-icon",{attrs:{icon:"person-fill"}}),e._v(" People ")]},proxy:!0}])},[i("div",{staticClass:"m-3 text-right"},[i("b-input-group",[i("b-form-input",{attrs:{type:"text",formatter:e.peopleNameFormatter},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onAddPersonHandler(t)}},model:{value:e.people.toAdd,callback:function(t){e.$set(e.people,"toAdd",t)},expression:"people.toAdd"}}),i("b-input-group-append",[i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:"Add person",expression:"'Add person'",modifiers:{hover:!0}}],attrs:{size:"sm",variant:"success"},on:{click:e.onAddPersonHandler}},[i("b-icon",{attrs:{icon:"person-plus"}})],1)],1)],1)],1),e._l(e.people.idList,(function(t,a){return i("div",{key:a,staticClass:"mt-2 mx-3"},[i("b-row",[i("b-col",{staticClass:"text-left",attrs:{cols:"10"}},[i("h3",[i("b-badge",{class:e.people.details[t].personClass},[e._v(" "+e._s(e.people.details[t].name)+" ")])],1)]),i("b-col",{staticClass:"text-right",attrs:{cols:"2"}},[i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:"Remove person",expression:"'Remove person'",modifiers:{hover:!0}}],staticClass:"mt-1",attrs:{size:"sm",variant:"danger"},on:{click:function(t){return e.onDeletePersonHandler(a)}}},[i("b-icon",{attrs:{icon:"trash"}})],1)],1)],1)],1)}))],2),e.result.calculated?i("b-tab",{scopedSlots:e._u([{key:"title",fn:function(){return[i("b-icon",{attrs:{icon:"journal-text"}}),e._v(" Results "),i("b-icon",{directives:[{name:"show",rawName:"v-show",value:e.result.dirty,expression:"result.dirty"}],attrs:{icon:"exclamation-circle-fill",variant:"danger"}})]},proxy:!0}],null,!1,459559787)},[i("b-row",{staticClass:"mt-2"},[i("b-col",{staticClass:"text-right h4"},[i("b-avatar-group",{attrs:{size:"sm"}},e._l(e.people.idList,(function(t,a){return i("b-avatar",{key:a,class:e.people.details[t].personClass,attrs:{text:e.people.details[t].initial}})})),1)],1),i("b-col",{staticClass:"text-right",attrs:{cols:"6"}},[i("span",{staticClass:"ml-2"},[i("b-avatar",{attrs:{variant:"primary",icon:"download",button:""},on:{click:e.onExportXlsxHandler}})],1)])],1),i("b-row",{staticClass:"mt-4"},[i("b-col",{staticClass:"text-left",attrs:{cols:"4"}},[i("b",[e._v("Tax:")]),e._v(" "+e._s(e.input.taxRate)+" % ")])],1),i("hr"),i("div",{staticClass:"h3 my-2 text-left"},[e._v(" Results ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.result.dirty,expression:"result.dirty"}],staticClass:"h6 text-left"},[i("b-icon",{attrs:{icon:"exclamation-circle-fill",variant:"danger"}}),e._v(" Input modified since last calculation ")],1),e.result.showTransferResult?i("div",{staticClass:"text-left"},e._l(e.result.transferScheme,(function(t,a){return i("div",{key:a,staticClass:"mt-3 h4"},[i("b-avatar",{class:e.people.details[t.from].personClass,attrs:{size:"sm",text:e.people.details[t.from].initial}}),i("b-icon",{staticClass:"ml-1",attrs:{icon:"arrow-right"}}),i("b-badge",{attrs:{variant:"dark"}},[e._v("$"+e._s(t.amount.toFixed(e.result.precision)))]),i("b-icon",{attrs:{icon:"arrow-right"}}),i("b-avatar",{class:e.people.details[t.to].personClass,attrs:{size:"sm",text:e.people.details[t.to].initial}})],1)})),0):e._e(),e.result.showPayableResult?i("div",{staticClass:"text-left"},e._l(e.result.summary,(function(t,a){return 0!==t.payable?i("div",{key:a,staticClass:"mt-3 h4"},[i("b-avatar",{class:e.people.details[t.personId].personClass,attrs:{size:"sm",text:e.people.details[t.personId].initial}}),i("b-icon",{staticClass:"ml-1",attrs:{icon:"arrow-right"}}),i("b-badge",{attrs:{variant:"dark"}},[e._v(" $"+e._s(t.payable.toFixed(e.result.precision))+" ")])],1):e._e()})),0):e._e(),i("div",{staticClass:"h4 mt-4 text-left"},[i("b-badge",{attrs:{variant:"light"}},[e._v(" Grand Total: $"+e._s(e.result.payableSum.toFixed(e.result.precision))+" ")])],1),i("hr")],1):e._e()],1),i("hr"),i("h5",{staticClass:"text-danger"},[e._v(" NOTICE: Moblie site is under construction. ")])],1):i("b-container",{attrs:{fluid:""}},[i("b-alert",{staticClass:"position-fixed fixed-top mt-1 mx-2 rounded-3",attrs:{variant:e.alert.main.variant,show:e.alert.main.countDown,dismissible:"",fade:""},on:{"dismiss-count-down":e.onAlertMainCountDownChanged}},[e._v(" "+e._s(e.alert.main.message)+" ")]),i("b-sidebar",{attrs:{id:"sidebar-people",right:"",shadow:"",backdrop:"","no-header":""}},[i("b-alert",{staticClass:"position-fixed fixed-top mt-1 mx-2 rounded-3",attrs:{variant:e.alert.sidebar.variant,show:e.alert.sidebar.countDown,dismissible:"",fade:""},on:{"dismiss-count-down":e.onAlertSideBarCountDownChanged}},[e._v(" "+e._s(e.alert.sidebar.message)+" ")]),i("div",{staticClass:"m-3 text-left"},[i("h4",[e._v("People")])]),i("div",{staticClass:"m-2 text-right"},[i("b-input-group",[i("b-form-input",{attrs:{type:"text",formatter:e.peopleNameFormatter},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onAddPersonHandler(t)}},model:{value:e.people.toAdd,callback:function(t){e.$set(e.people,"toAdd",t)},expression:"people.toAdd"}}),i("b-input-group-append",[i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:"Add person",expression:"'Add person'",modifiers:{hover:!0}}],attrs:{size:"sm",variant:"success"},on:{click:e.onAddPersonHandler}},[i("b-icon",{attrs:{icon:"person-plus"}})],1)],1)],1)],1),e._l(e.people.idList,(function(t,a){return i("div",{key:a,staticClass:"mt-2 mx-3"},[i("b-row",[i("b-col",{staticClass:"text-left",attrs:{cols:"10"}},[i("h3",[i("b-badge",{class:e.people.details[t].personClass},[e._v(" "+e._s(e.people.details[t].name)+" ")])],1)]),i("b-col",{staticClass:"text-right",attrs:{cols:"2"}},[i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:"Remove person",expression:"'Remove person'",modifiers:{hover:!0}}],staticClass:"mt-1",attrs:{size:"sm",variant:"danger"},on:{click:function(t){return e.onDeletePersonHandler(a)}}},[i("b-icon",{attrs:{icon:"trash"}})],1)],1)],1)],1)}))],2),i("b-modal",{attrs:{title:e.modalShareTitle,"ok-only":"","header-bg-variant":"dark","header-text-variant":"light"},on:{hidden:e.onCloseModalShareHandler},model:{value:e.modal.share.show,callback:function(t){e.$set(e.modal.share,"show",t)},expression:"modal.share.show"}},[i("b-container",{attrs:{fluid:""}},[e.people.idList.length>0?i("b-row",{staticClass:"mb-1 text-center border-danger"},[i("b-col",{attrs:{cols:"8"}}),i("b-col",{staticClass:"h5"},[i("b",[e._v("Share")])])],1):i("div",{staticClass:"text-warning h5"},[e._v(" No people available. Please add people first. ")]),e._l(e.people.idList,(function(t,a){return i("div",{key:a},[i("b-row",{staticClass:"mb-1 text-center"},[i("b-col",{attrs:{cols:"8"}},[i("div",{staticClass:"h3 text-left"},[i("b-badge",{class:e.people.details[t].personClass},[e._v(" "+e._s(e.people.details[t].name)+" ")])],1)]),i("b-col",["Claim"===e.modal.share.mode?i("div",{staticClass:"text-right"},[i("b-form-input",{attrs:{type:"number","lazy-formatter":"",formatter:e.modalShareFormatter,number:""},model:{value:e.people.details[t].claim[e.modal.share.itemIndex],callback:function(a){e.$set(e.people.details[t].claim,e.modal.share.itemIndex,a)},expression:"people.details[personId].claim[modal.share.itemIndex]"}})],1):i("div",{staticClass:"text-right"},[i("b-form-input",{attrs:{type:"number","lazy-formatter":"",formatter:e.modalShareFormatter,number:""},model:{value:e.people.details[t].paid[e.modal.share.itemIndex],callback:function(a){e.$set(e.people.details[t].paid,e.modal.share.itemIndex,a)},expression:"people.details[personId].paid[modal.share.itemIndex]"}})],1)])],1)],1)}))],2)],1),i("b-modal",{attrs:{title:"Details","ok-only":"",size:"lg","header-bg-variant":"dark","header-text-variant":"light"},on:{hidden:function(t){e.modal.details.show=!1}},model:{value:e.modal.details.show,callback:function(t){e.$set(e.modal.details,"show",t)},expression:"modal.details.show"}},[i("b-container",{attrs:{fluid:""}},[i("b-table",{attrs:{outlined:"",hover:"",items:e.result.summary,fields:e.input.enablePaidByMode?e.result.fieldsPaidByMode:e.result.fieldsPayableMode},scopedSlots:e._u([{key:"head(personId)",fn:function(){return[i("div",{staticClass:"h5 text-left"},[e._v(" Person ")])]},proxy:!0},{key:"cell(personId)",fn:function(t){return[i("div",{staticClass:"text-left"},[i("b-avatar",{class:e.people.details[t.item.personId].personClass,attrs:{text:e.people.details[t.item.personId].initial}})],1)]}},{key:"head(payable)",fn:function(){return[i("div",{staticClass:"h5 text-right"},[e._v(" Payable ")])]},proxy:!0},{key:"cell(payable)",fn:function(t){return[i("div",{staticClass:"h5 text-right"},[e._v(" $"+e._s(t.item.payable.toFixed(e.result.precision))+" ")])]}},{key:"head(paid)",fn:function(){return[i("div",{staticClass:"h5 text-right"},[e._v(" Paid ")])]},proxy:!0},{key:"cell(paid)",fn:function(t){return[i("div",{staticClass:"h5 text-right"},[e._v(" $"+e._s(t.item.paid.toFixed(e.result.precision))+" ")])]}},{key:"head(netPayable)",fn:function(){return[i("div",{staticClass:"h5 text-right"},[e._v(" Net Payable ")])]},proxy:!0},{key:"cell(netPayable)",fn:function(t){return[i("div",{staticClass:"h5 text-right"},[e._v(" $"+e._s(t.item.netPayable.toFixed(e.result.precision))+" ")])]}},{key:"cell(action)",fn:function(t){return[i("div",{staticClass:"h5 text-right"},[i("b-button",{attrs:{size:"sm"},on:{click:t.toggleDetails}},[e._v(" Details ")])],1)]}},{key:"row-details",fn:function(t){return e._l(e.input.items,(function(a,s){return i("b-list-group",{key:s,staticClass:"h6"},[i("b-list-group-item",[i("b-row",[i("b-col",{staticClass:"text-left",attrs:{cols:"5"}},[e._v(" "+e._s(a.name)+" "),i("b-badge",{attrs:{variant:"info",size:"lg"}},[e._v(" $"+e._s(e.result.taxAdaptedCost[s].toFixed(e.result.precision))+" ")])],1),i("b-col",{staticClass:"text-right",attrs:{cols:"3"}},[e.result.payableMap[t.item.personId][s].share>0?i("span",[e._v(" claimed "),e.result.payableMap[t.item.personId][s].share===e.result.totalClaimShare[s]?i("span",[e._v(" fully ")]):i("span",[e._v(" "+e._s(e.result.payableMap[t.item.personId][s].share)+"/"+e._s(e.result.totalClaimShare[s])+" ")]),i("b-badge",{attrs:{variant:"danger",size:"lg"}},[e._v(" $"+e._s(e.result.payableMap[t.item.personId][s].cost.toFixed(e.result.precision))+" ")])],1):e._e()]),i("b-col",{staticClass:"text-right",attrs:{cols:"3"}},[e.input.enablePaidByMode?i("span",[e.result.paidMap[t.item.personId][s].share>0?i("span",[e._v(" paid "),e.result.paidMap[t.item.personId][s].share===e.result.totalPaidShare[s]?i("span",[e._v(" fully ")]):i("span",[e._v(" "+e._s(e.result.paidMap[t.item.personId][s].share)+"/"+e._s(e.result.totalPaidShare[s])+" ")]),i("b-badge",{attrs:{variant:"success",size:"lg"}},[e._v(" $"+e._s(e.result.paidMap[t.item.personId][s].cost.toFixed(e.result.precision))+" ")])],1):e._e()]):e._e()])],1)],1)],1)}))}}],null,!1,3608736760)})],1)],1),i("div",{staticClass:"h1 text-primary"},[i("span",[i("b-img",{attrs:{src:a("33f0"),width:"64px",height:"64px"}})],1),e._v(" GUA: An easy bill spliter ")]),i("b-row",[i("b-col",{staticClass:"text-left",attrs:{cols:"9"}},[i("span",{staticClass:"mx-1"},[i("b-button",{attrs:{variant:"primary"},on:{click:e.onAddItemHandler}},[i("b-icon",{attrs:{icon:"plus"}}),e._v(" Add Item ")],1)],1),i("span",{staticClass:"mx-1"},[i("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.sidebar-people",modifiers:{"sidebar-people":!0}}],attrs:{variant:"primary"}},[i("b-icon",{attrs:{icon:"people-fill"}}),e._v(" People ")],1)],1),i("span",{staticClass:"mx-1"},[i("b-button",{attrs:{variant:"primary"},on:{click:e.onCalculateHandler}},[i("b-icon",{attrs:{icon:"calculator-fill"}}),e._v(" Calculate ")],1)],1),i("span",{directives:[{name:"show",rawName:"v-show",value:e.result.calculated&&!e.result.dirty,expression:"result.calculated && !result.dirty"}],staticClass:"mx-1"},[i("b-button",{attrs:{variant:e.detailsVariant},on:{click:e.onDetailHandler}},[i("b-icon",{attrs:{icon:"journal-text"}}),e._v(" Details ")],1)],1),i("span",{directives:[{name:"show",rawName:"v-show",value:e.result.calculated&&!e.result.dirty&&e.result.consistent,expression:"result.calculated && !result.dirty && result.consistent"}],staticClass:"mx-1"},[i("b-dropdown",{attrs:{left:"",variant:"success"},scopedSlots:e._u([{key:"button-content",fn:function(){return[i("b-icon",{attrs:{icon:"download"}}),e._v(" Export ")]},proxy:!0}],null,!1,1488357325)},[i("b-dropdown-item-button",{on:{click:e.onExportXlsxHandler}},[e._v(".xlsx")])],1)],1),i("span",{staticClass:"mx-1"},[i("b-button",{attrs:{variant:"danger"},on:{click:e.resetAll}},[i("b-icon",{attrs:{icon:"trash-fill"}}),e._v(" Delete All ")],1)],1)]),i("b-col",{staticClass:"text-right",attrs:{cols:"2"}},[i("b",{staticClass:"h3"},[e._v("Tax rate")])]),i("b-col",{staticClass:"text-right",attrs:{cols:"1"}},[i("CounterWidget",{attrs:{size:"sm",min:0,max:100},model:{value:e.input.taxRate,callback:function(t){e.$set(e.input,"taxRate",t)},expression:"input.taxRate"}})],1)],1),i("b-row",{staticClass:"mt-2"},[i("b-col",{staticClass:"text-right",attrs:{cols:"4"}},[i("b-avatar-group",e._l(e.people.idList,(function(t,a){return i("b-avatar",{key:a,class:e.people.details[t].personClass,attrs:{text:e.people.details[t].initial}})})),1)],1)],1),i("div",{staticClass:"mt-2"},[i("b-table",{attrs:{striped:"",hover:"","sticky-header":"500px","no-border-collapse":!0,items:e.input.items,fields:e.input.fields},scopedSlots:e._u([{key:"cell(action)",fn:function(t){return[i("span",{staticClass:"mx-1"},[i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:"Delete item",expression:"'Delete item'",modifiers:{hover:!0}}],attrs:{variant:"danger",size:"sm"},on:{click:function(a){return e.onDeleteItemHandler(t.index)}}},[i("b-icon",{attrs:{icon:"trash"}})],1)],1),i("span",{staticClass:"mx-1"},[i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:"Reset item",expression:"'Reset item'",modifiers:{hover:!0}}],attrs:{variant:"warning",size:"sm"},on:{click:function(a){return e.onResetItemHandler(t.index)}}},[i("b-icon",{attrs:{icon:"arrow-counterclockwise"}})],1)],1)]}},{key:"cell(name)",fn:function(t){return[i("b-form-input",{attrs:{type:"text",formatter:e.itemNameFormatter},model:{value:t.item.name,callback:function(a){e.$set(t.item,"name",a)},expression:"row.item.name"}})]}},{key:"cell(cost)",fn:function(t){return[i("b-form-input",{attrs:{type:"number","lazy-formatter":"",formatter:e.itemCostFormatter},on:{change:function(t){e.result.dirty=!0}},model:{value:t.item.cost,callback:function(a){e.$set(t.item,"cost",a)},expression:"row.item.cost"}})]}},{key:"cell(taxed)",fn:function(t){return[i("b-checkbox",{attrs:{switch:"",size:"lg"},on:{change:function(t){e.result.dirty=!0}},model:{value:t.item.taxed,callback:function(a){e.$set(t.item,"taxed",a)},expression:"row.item.taxed"}})]}},{key:"cell(claim)",fn:function(t){return[i("div",{staticClass:"text-right"},[e._l(e.people.idList,(function(a,s){return i("span",{key:s,staticClass:"m-0"},[i("b-avatar",{directives:[{name:"show",rawName:"v-show",value:e.getItemClaimShare(a,t.index,String),expression:"getItemClaimShare(personId, row.index, String)"}],class:e.people.details[a].personClass,attrs:{"badge-top":"","badge-variant":"primary",badge:e.getItemClaimShare(a,t.index,String),text:e.people.details[a].initial}})],1)})),i("span",{staticClass:"m-1"},[i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:"Edit shares claimed",expression:"'Edit shares claimed'",modifiers:{hover:!0}}],attrs:{size:"sm",variant:"primary"},on:{click:function(a){return e.onOpenModalShareHandler(t,"Claim")}}},[i("b-icon",{attrs:{icon:"pencil-square"}})],1)],1)],2)]}},{key:"head(paidBy)",fn:function(t){return[i("b-form-checkbox",{attrs:{switch:""},on:{change:e.onToggleEnablePaidByModeHandler},model:{value:e.input.enablePaidByMode,callback:function(t){e.$set(e.input,"enablePaidByMode",t)},expression:"input.enablePaidByMode"}},[e._v(" Paid By ")])]}},{key:"cell(paidBy)",fn:function(t){return[i("div",{staticClass:"text-right"},[e._l(e.people.idList,(function(a,s){return i("span",{directives:[{name:"show",rawName:"v-show",value:e.input.enablePaidByMode,expression:"input.enablePaidByMode"}],key:s,staticClass:"m-0"},[i("b-avatar",{directives:[{name:"show",rawName:"v-show",value:e.getItemPaidShare(a,t.index,String),expression:"getItemPaidShare(personId, row.index, String)"}],class:e.people.details[a].personClass,attrs:{"badge-top":"","badge-variant":"primary",badge:e.getItemPaidShare(a,t.index,String),text:e.people.details[a].initial}})],1)})),i("span",{staticClass:"m-1"},[i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:"Edit shares paid",expression:"'Edit shares paid'",modifiers:{hover:!0}}],attrs:{size:"sm",variant:"primary",disabled:!e.input.enablePaidByMode},on:{click:function(a){return e.onOpenModalShareHandler(t,"Paid")}}},[i("b-icon",{attrs:{icon:"pencil-square"}})],1)],1)],2)]}}],null,!1,4286033440)})],1),0==e.input.items.length?i("div",{staticClass:"mb-2"},[i("form",{staticClass:"mb-2"},[i("div",{ref:"fileinputzone",staticClass:"text-center fileInputZone mt-4",on:{drop:e.onDropFileHandler,dragenter:e.onDragEnterHandler,dragover:e.suppressAction,dragleave:e.onDragLeaveHandler}},[i("div",{staticClass:"my-2"},[i("svg",{staticClass:"bi bi-upload mt-4",attrs:{width:"4em",height:"4em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{"fill-rule":"evenodd",d:"M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"}}),i("path",{attrs:{"fill-rule":"evenodd",d:"M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z"}})])]),i("div",[i("input",{ref:"importfile",attrs:{type:"file",accept:e.acceptFiles},on:{change:e.onImportFileHandler}}),i("h2",[e._v("Upload .xlsx")])])])]),i("span",{staticClass:"mx-1"},[i("b-button",{attrs:{variant:"primary"},on:{click:e.onExampleInputHandler}},[e._v(" Example Input File ")])],1)]):e._e(),0==e.input.items.length?i("div"):e._e(),e.result.calculated?i("div",[i("hr"),i("div",{staticClass:"h1 my-2 text-left"},[e._v(" Results "),i("span",{staticClass:"h4"},[e._v(" (with "+e._s(e.input.taxRate)+"% tax rate) ")])]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.result.dirty,expression:"result.dirty"}],staticClass:"h5 text-left"},[i("b-icon",{attrs:{icon:"exclamation-circle-fill",variant:"danger"}}),e._v(" Input modified, recalculation may be necessary. ")],1),e.result.showTransferResult?i("div",{staticClass:"text-left"},e._l(e.result.transferScheme,(function(t,a){return i("div",{key:a,staticClass:"mt-3 h2"},[i("b-avatar",{class:e.people.details[t.from].personClass,attrs:{size:"sm",text:e.people.details[t.from].initial}}),i("b-icon",{staticClass:"ml-1",attrs:{icon:"arrow-right"}}),i("b-badge",{attrs:{variant:"dark"}},[e._v("$"+e._s(t.amount.toFixed(e.result.precision)))]),i("b-icon",{attrs:{icon:"arrow-right"}}),i("b-avatar",{class:e.people.details[t.to].personClass,attrs:{size:"sm",text:e.people.details[t.to].initial}})],1)})),0):e._e(),e.result.showPayableResult?i("div",{staticClass:"text-left"},e._l(e.result.summary,(function(t,a){return 0!==t.payable?i("div",{key:a,staticClass:"mt-3 h2"},[i("b-avatar",{class:e.people.details[t.personId].personClass,attrs:{size:"sm",text:e.people.details[t.personId].initial}}),i("b-icon",{staticClass:"ml-1",attrs:{icon:"arrow-right"}}),i("b-badge",{attrs:{variant:"dark"}},[e._v(" $"+e._s(t.payable.toFixed(e.result.precision))+" ")])],1):e._e()})),0):e._e(),i("div",{staticClass:"h2 mt-4 text-left"},[i("b-badge",{attrs:{variant:"light"}},[e._v(" Grand Total: $"+e._s(e.result.payableSum.toFixed(e.result.precision))+" ")])],1),i("hr")]):e._e(),i("div",{staticClass:"text-left h5"})],1)},d=[],c=(a("99af"),a("cb29"),a("4160"),a("caad"),a("c975"),a("a15b"),a("d81d"),a("13d5"),a("fb6a"),a("45fc"),a("a434"),a("b0c0"),a("a9e3"),a("8ba4"),a("b680"),a("07ac"),a("ac1f"),a("2532"),a("38cf"),a("1276"),a("498a"),a("159b"),a("53ca")),p=a("b85c"),u=a("1146"),m=a.n(u),h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-input-group",[a("b-input-group-prepend",[a("b-button",{attrs:{variant:"primary",size:e.size,disabled:e.d_value<=e.min},on:{click:e.onMinusHandler}},[e._v(" - ")])],1),a("b-form-input",{staticClass:"text-center",attrs:{type:"number",size:e.size,"lazy-formatter":"",formatter:e.valueFormatter},on:{change:e.onInputHandler},model:{value:e.d_value,callback:function(t){e.d_value=t},expression:"d_value"}}),a("b-input-group-prepend",[a("b-button",{attrs:{variant:"primary",size:e.size,disabled:e.d_value>=e.max},on:{click:e.onAddHandler}},[e._v(" + ")])],1)],1)],1)},b=[],f={name:"CounterWidget",data:function(){return{d_value:0}},props:{max:{type:Number,default:100},min:{type:Number,default:0},value:{type:Number,default:0},size:{type:String,default:"sm"}},watch:{value:function(e){this.d_value=e}},methods:{onAddHandler:function(){this.d_value+=1,this.$emit("input",this.d_value)},onMinusHandler:function(){this.d_value-=1,this.$emit("input",this.d_value)},valueFormatter:function(e){return""===e?0:(e=Number(e),e>this.max?e=this.max:e<this.min&&(e=this.min),e)},onInputHandler:function(e){this.$emit("input",this.valueFormatter(e))}}},v=f,x=a("2877"),y=Object(x["a"])(v,h,b,!1,null,null,null),g=y.exports,C=!0,w="TOTAL";function k(e){C&&console.log(e)}function _(){return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4))}function P(e){k("getTransferScheme called with ".concat(JSON.stringify(e)));var t=[];for(var a in e)a!=w&&t.push({person:a,netPayable:e[a]});t.sort((function(e,t){return e.netPayable>t.netPayable?-1:e.netPayable<t.netPayable?1:0}));var i=[],s=0,l=t.length-1;while(s<l)if(0===t[s].netPayable)s+=1;else if(0===t[l].netPayable)l-=1;else{var n=t[s].person,r=t[l].person,o=Math.min(t[s].netPayable,-t[l].netPayable);i.push({from:n,to:r,amount:o}),t[s].netPayable-=o,t[l].netPayable+=o}return i}var I={name:"BillSpliter",data:function(){return{input:{fields:[{key:"action",label:""},{key:"name",label:"Item"},{key:"cost",label:"Cost"},{key:"taxed",label:"Taxed"},{key:"claim",label:"Claim"},{key:"paidBy",label:"Paid By"}],fieldsMobile:[{key:"action",label:""},{key:"name",label:"Item"},{key:"cost",label:"Cost"}],items:[],taxRate:0,enablePaidByMode:!1,maxNameLen:30,validFileExt:["xlsx"]},result:{fieldsPayableMode:[{key:"personId",label:"Person"},{key:"payable",label:"Payable"},{key:"action",label:""}],fieldsPaidByMode:[{key:"personId",label:"Person"},{key:"netPayable",label:"Net Payable"},{key:"payable",label:"Payable"},{key:"paid",label:"Paid"},{key:"action",label:""}],summary:[],taxAdaptedCost:[],totalClaimShare:[],costPerClaimShare:[],totalPaidShare:[],costPerPaidShare:[],calculated:!1,consistent:!0,dirty:!1,payableMap:{},paidMap:{},transferScheme:[],payableSum:0,paidSum:0,costSum:0,precision:2,consistentTol:.01,showTransferResult:!1,showPayableResult:!1},alert:{main:{message:"",variant:"",countDown:0,initCountDown:3},sidebar:{message:"",variant:"",countDown:0,initCountDown:3},modalShare:{message:"",variant:"",countDown:0,initCountDown:3}},people:{maxNameLen:20,toAdd:"",maxCount:10,idList:[],idIdle:["0","1","2","3","4","5","6","7","8","9"],details:{0:{name:"",initial:"",personClass:"person-class-0",claim:[],paid:[]},1:{name:"",initial:"",personClass:"person-class-1",claim:[],paid:[]},2:{name:"",initial:"",personClass:"person-class-2",claim:[],paid:[]},3:{name:"",initial:"",personClass:"person-class-3",claim:[],paid:[]},4:{name:"",initial:"",personClass:"person-class-4",claim:[],paid:[]},5:{name:"",initial:"",personClass:"person-class-5",claim:[],paid:[]},6:{name:"",initial:"",personClass:"person-class-6",claim:[],paid:[]},7:{name:"",initial:"",personClass:"person-class-7",claim:[],paid:[]},8:{name:"",initial:"",personClass:"person-class-8",claim:[],paid:[]},9:{name:"",initial:"",personClass:"person-class-9",claim:[],paid:[]}}},modal:{share:{show:!1,itemIndex:void 0,mode:void 0},details:{show:!1},mobileEdit:{show:!1,itemIndex:void 0}},env:{mobile:!1,enableCookies:!1}}},computed:{modalShareTitle:function(){return k("modalShareTitle called with share.itemIndex = ".concat(this.modal.share.itemIndex)),this.modal.share.show&&Number.isInteger(this.modal.share.itemIndex)?"".concat(this.input.items[this.modal.share.itemIndex].name," -- ").concat(this.modal.share.mode):"TITLE -- ".concat(this.modal.share.mode)},modalMobileEditTitle:function(){return k("modalMobileEditTitle called with mobileEdit.itemIndex = ".concat(this.modal.mobileEdit.itemIndex)),"Edit Item"},detailsVariant:function(){return this.result.consistent?"success":"danger"},acceptFiles:function(){return this.input.validFileExt.map((function(e){return"."+e})).join(",")}},created:function(){console.log("created"),this.env.mobile=_(),window.addEventListener("beforeunload",this.onBeforeUnloadHander)},mounted:function(){console.log("mounted"),this.env.enableCookies&&(this.loadDataCookies(),window.setInterval(this.saveDataCookies,5e3))},methods:{onCalculateHandler:function(){if(k("onCalculateHandler called"),this.validateInput()){this.clearResults();var e,t=Object(p["a"])(this.people.idList);try{for(t.s();!(e=t.n()).done;){var a=e.value;this.result.payableMap[a]=[],this.result.paidMap[a]=[]}}catch(_){t.e(_)}finally{t.f()}for(var i in this.input.items){var s=this.input.items[i];this.result.taxAdaptedCost[i]=s.taxed?s.cost*(1+this.input.taxRate/100):s.cost,this.result.totalClaimShare.push(this.getItemTotalClaimShare(i)),this.result.costPerClaimShare[i]=this.result.taxAdaptedCost[i]/this.result.totalClaimShare[i];var l,n=Object(p["a"])(this.people.idList);try{for(n.s();!(l=n.n()).done;){var r=l.value,o=this.getItemClaimShare(r,i);this.result.payableMap[r].push({share:o,cost:o*this.result.costPerClaimShare[i]})}}catch(_){n.e(_)}finally{n.f()}if(this.input.enablePaidByMode){this.result.totalPaidShare.push(this.getItemTotalPaidShare(i)),this.result.costPerPaidShare[i]=this.result.taxAdaptedCost[i]/this.result.totalPaidShare[i];var d,c=Object(p["a"])(this.people.idList);try{for(c.s();!(d=c.n()).done;){var u=d.value,m=this.getItemPaidShare(u,i);this.result.paidMap[u].push({share:m,cost:m*this.result.costPerPaidShare[i]})}}catch(_){c.e(_)}finally{c.f()}}this.result.costSum+=this.result.taxAdaptedCost[i]}this.result.payableSum=0,this.result.paidSum=0;var h,b=Object(p["a"])(this.people.idList);try{for(b.s();!(h=b.n()).done;){var f=h.value,v=!1,x={personId:f};x.payable=this.result.payableMap[f].reduce((function(e,t){return 0!=t.share&&(v=!0),e+t.cost}),0),this.result.payableSum+=x.payable,this.input.enablePaidByMode&&(x.paid=this.result.paidMap[f].reduce((function(e,t){return 0!=t.share&&(v=!0),e+t.cost}),0),x.netPayable=x.payable-x.paid,this.result.paidSum+=x.paid),v&&this.result.summary.push(x)}}catch(_){b.e(_)}finally{b.f()}if(this.input.enablePaidByMode){var y,g={},C=Object(p["a"])(this.result.summary);try{for(C.s();!(y=C.n()).done;){var w=y.value;g[w.personId]=w.netPayable}}catch(_){C.e(_)}finally{C.f()}this.result.transferScheme=P(g)}this.result.calculated=!0,this.result.dirty=!1,this.result.consistent=Math.abs(this.result.payableSum-this.result.costSum)<this.result.consistentTol,this.result.consistent?(this.showAlert(this.alert.main,"Calculation done","success"),this.result.showTransferResult=this.input.enablePaidByMode,this.result.showPayableResult=!this.input.enablePaidByMode):this.showAlert(this.alert.main,"Inconsisitent results","warning")}},validateInput:function(){if(k("validateInput called"),this.input.taxRate<0)return this.showAlert(this.alert.main,"Invalid tax rate","danger"),!1;if(0===this.input.items.length)return this.showAlert(this.alert.main,"No item, no calculation needed","warning"),!1;for(var e in this.input.items){if(this.getItemTotalClaimShare(e)<=0)return this.showAlert(this.alert.main,"Someone must claim ".concat(this.input.items[e].name),"danger"),!1;if(this.input.enablePaidByMode&&this.getItemTotalPaidShare(e)<=0)return this.showAlert(this.alert.main,"Someone must pay for ".concat(this.input.items[e].name),"danger"),!1}return!0},clearResults:function(){k("clearResults called"),this.result.summary=[],this.result.taxAdaptedCost=[],this.result.totalClaimShare=[],this.result.costPerClaimShare=[],this.result.totalPaidShare=[],this.result.costPerPaidShare=[],this.result.calculated=!1,this.result.consistent=!0,this.result.dirty=!0,this.result.payableMap={},this.result.paidMap={},this.result.transferScheme=[],this.result.payableSum=0,this.result.paidSum=0,this.result.costSum=0},onAddItemHandler:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];k("onAddItemHandler called with editAfterAdd=".concat(e));var t="Item ".concat(this.input.items.length+1),a=0,i=!1;this.input.items.push({name:t,cost:a,taxed:i}),Object.values(this.people.details).forEach((function(e){e.claim.push(0),e.paid.push(0)})),this.result.dirty=!0,e&&this.env.mobile&&this.onOpenModalMobileEditHandler(this.input.items.length-1)},onDeleteItemHandler:function(e){k("onDeleteItemHandler called with ".concat(e)),Object.values(this.people.details).forEach((function(t){t.claim.splice(e,1),t.paid.splice(e,1)})),this.input.items.splice(e,1),this.result.dirty=!0},onResetItemHandler:function(e){k("onResetItemHandler called with ".concat(e)),this.input.items[e].name="",this.input.items[e].cost=0,this.input.items[e].taxed=!1;var t,a=Object(p["a"])(this.people.idList);try{for(a.s();!(t=a.n()).done;){var i=t.value;this.people.details[i].claim[e]=0,this.people.details[i].paid[e]=0}}catch(s){a.e(s)}finally{a.f()}this.result.dirty=!0},showAlert:function(e,t,a){e.message=t,e.variant=a,e.countDown=e.initCountDown},onAlertMainCountDownChanged:function(e){this.alert.main.countDown=e},onAlertSideBarCountDownChanged:function(e){this.alert.sidebar.countDown=e},onAlertModalShareCountDownChanged:function(e){this.alert.modalShare.countDown=e},onAddPersonHandler:function(){if(k("onAddPersonHandler called"),this.people.toAdd=this.people.toAdd.trim(),this.people.toAdd){if(this.people.idList.length===this.people.maxCount)this.showAlert(this.alert.sidebar,"Max number reached","warning");else{k("adding ".concat(this.people.toAdd));var e=this.peopleNameFormatter(this.people.toAdd),t=e[0].toUpperCase();if(e.includes(" ")){var a=e.length-1;while(" "!==e[a-1])a-=1;t+=e[a]}var i=this.people.idIdle[0];this.people.idIdle.shift(),this.people.idList.push(i),this.people.details[i].name=e,this.people.details[i].initial=t,this.people.details[i].claim=new Array(this.input.items.length),this.people.details[i].paid=new Array(this.input.items.length),this.people.details[i].claim.fill(0),this.people.details[i].paid.fill(0)}this.people.toAdd=""}},onDeletePersonHandler:function(e){k("onDeletePersonHandler called with ".concat(e));var t=this.people.idList[e];this.people.idList.splice(e,1),this.people.idIdle.push(t),this.people.details[t].claim.some((function(e){return 0!==e}))&&(this.result.dirty=!0,this.result.showTransferResult=!1,this.result.showPayableResult=!1),this.people.details[t].paid.some((function(e){return 0!==e}))&&(this.result.dirty=!0,this.result.showTransferResult=!1,this.result.showPayableResult=!1)},onOpenModalShareHandler:function(e,t){k("onOpenModalShareHandler called with ".concat(JSON.stringify(e))),this.modal.share.show=!0,this.modal.share.itemIndex=e.index,this.modal.share.mode=t},onCloseModalShareHandler:function(){k("onCloseModalShareHandler called"),this.modal.share.show=!1,this.modal.share.itemIndex=void 0,this.modal.share.mode=void 0,this.result.dirty=!0},onOpenModalMobileEditHandler:function(e){k("onOpenModalMobileEditHandler called with ".concat(e)),this.modal.mobileEdit.show=!0,this.modal.mobileEdit.itemIndex=e},onCloseModalMobileEditHandler:function(){k("onCloseModalMobileEditHandler called"),this.modal.mobileEdit.show=!1,this.modal.mobileEdit.itemIndex=void 0,this.result.dirty=!0},onToggleEnablePaidByModeHandler:function(){k("onToggleEnablePaidByModeHandler called"),this.input.enablePaidByMode?this.turnOffEnablePaidByMode():this.turnOnEnablePaidByMode()},onDetailHandler:function(){k("onDetailHandler called"),this.modal.details.show=!0},turnOnEnablePaidByMode:function(){k("turnOnEnablePaidByMode called"),this.result.dirty=!0,this.result.showTransferResult=!0,this.result.showPayableResult=!1},turnOffEnablePaidByMode:function(){k("turnOffEnablePaidByMode called"),this.result.showTransferResult=!1,this.result.showPayableResult=!0},getItemClaimShare:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number,i=this.people.details[e].claim[t];return a===String?i>0&&String(i):i},getItemPaidShare:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number,i=this.people.details[e].paid[t];return a===String?i>0&&String(i):i},getItemTotalClaimShare:function(e){var t=this;return this.people.idList.reduce((function(a,i){return a+t.people.details[i].claim[e]}),0)},getItemTotalPaidShare:function(e){var t=this;return this.people.idList.reduce((function(a,i){return a+t.people.details[i].paid[e]}),0)},getDetailsStr:function(e,t){var a="",i=this.input.items[t],s=this.getItemTotalClaimShare(t),l=this.getItemClaimShare(e,t),n=this.getItemTotalPaidShare(t),r=this.getItemPaidShare(e,t),o=this.input.items[t].taxed,d=this.input.items[t].cost*(o?1+this.input.taxRate/100:1),c=l/s*d,p=r/n*d;return a+=l>0?"".concat(i.name," ($").concat(d.toFixed(this.result.precision),"): claimed ").concat(l,"/").concat(s," -- $ ").concat(c.toFixed(this.result.precision)):"".concat(i.name," ($").concat(d.toFixed(this.result.precision),"): not claimed"),this.input.enablePaidByMode&&(a+=r>0?", paid ".concat(r,"/").concat(n," -- $ ").concat(p.toFixed(this.result.precision)):", not paid"),a+"."},onExportXlsxHandler:function(){k("onExportXlsxHandler called");var e=m.a.utils.book_new(),t=["[LABEL]"],a=["[PEOPLE]"];for(var i in this.people.idList){var s=this.people.idList[i];t.push(i),a.push(this.people.details[s].name)}var l=0,n=[t,a];for(var r in n.push([]),n.push(["[TAXRATE]",this.input.taxRate]),n.push(["[ITEM]","[COST]","[TAXED]","[CLAIM]"]),this.input.enablePaidByMode&&n[n.length-1].push("[PAID]"),this.input.items){var o=this.input.items[r];l+=o.cost*(o.taxed?1+this.input.taxRate/100:1);var d=[o.name,o.cost.toFixed(this.result.precision),o.taxed?"T":"F"],c="",u="";for(var h in this.people.idList){var b=this.people.idList[h],f=this.people.details[b].claim[r];if(c+=String(h).repeat(f),this.input.enablePaidByMode){var v=this.people.details[b].paid[r];u+=String(h).repeat(v)}}d.push(c),this.input.enablePaidByMode&&d.push(u),n.push(d)}n.push([]),n.push(["[TOTAL]",l.toFixed(this.result.precision)]);var x=m.a.utils.aoa_to_sheet(n);if(m.a.utils.book_append_sheet(e,x,"Input"),this.result.calculated&&this.result.consistent&!this.result.dirty){var y=[];if(this.input.enablePaidByMode){y.push(["[PERSON]","[NET]","[PAYABLE]","[PAID]"]);var g,C=Object(p["a"])(this.result.summary);try{for(C.s();!(g=C.n()).done;){var w=g.value;y.push([this.people.details[w.personId].name,w.netPayable.toFixed(this.result.precision),w.payable.toFixed(this.result.precision),w.paid.toFixed(this.result.precision)])}}catch(E){C.e(E)}finally{C.f()}y.push([]),y.push(["[FROM]","[AMOUNT]","[TO]"]);var _,P=Object(p["a"])(this.result.transferScheme);try{for(P.s();!(_=P.n()).done;){var I=_.value;y.push([this.people.details[I.from].name,I.amount.toFixed(this.result.precision),this.people.details[I.to].name])}}catch(E){P.e(E)}finally{P.f()}}else{y.push(["[PERSON]","[PAYABLE]"]);var S,A=Object(p["a"])(this.result.summary);try{for(A.s();!(S=A.n()).done;){var M=S.value;y.push([this.people.details[M.personId].name,M.payable.toFixed(this.result.precision)])}}catch(E){A.e(E)}finally{A.f()}}var F=m.a.utils.aoa_to_sheet(y);m.a.utils.book_append_sheet(e,F,"Result")}m.a.writeFile(e,"GUA_export.xlsx")},onExampleInputHandler:function(){var e=m.a.utils.book_new();m.a.utils.book_append_sheet(e,m.a.utils.aoa_to_sheet([["[LABEL]","1","2","3","4"],["[PEOPLE]","Harry Potter","Hermione Granger","Ron Weasley","Rubeus Hagrid"],[],[],["[TAXRATE]","8"],["[ITEM]","[COST]","[TAXED]","[CLAIM]","[PAID]"],["Wand","139.99","T","1","4"],["Beer","19.99","F","1234","4"],["Heal Potion","59.99","T","233444","1"],["Juice","5.99","F","134","1"]]),"Input Example 1"),m.a.utils.book_append_sheet(e,m.a.utils.aoa_to_sheet([["[TAXRATE]","8"],[],[],[],["[COST]","[TAXED]","[CLAIM]"],["12.99","T","12"],["5.99","F","32"],["23.99","T","1122"],["167.99","F","345"],["9.99","T","156"],["19.99","T","234556"]]),"Input Example 2"),m.a.writeFile(e,"GUA_example_input.xlsx")},modalShareFormatter:function(e){if(!e)return 0;var t=Number(e);return Math.max(t,0)},peopleNameFormatter:function(e){return e.length>this.people.maxNameLen?e.slice(0,this.people.maxNameLen):e},itemNameFormatter:function(e){return e.length>this.input.maxNameLen?e.slice(0,this.input.maxNameLen):e},itemCostFormatter:function(e){return e?Number(e):0},taxRateFormatter:function(e){if(!e)return 0;var t=Number(e);return Math.min(Math.max(t,0),100)},onDragEnterHandler:function(e){this.$refs.fileinputzone.classList.add("fileInputZoneDragOver"),this.suppressAction(e)},onDragLeaveHandler:function(e){this.$refs.fileinputzone.classList.remove("fileInputZoneDragOver"),this.suppressAction(e)},suppressAction:function(e){k("suppressAction called with evt = ".concat(e)),e.stopPropagation(),e.preventDefault()},onDropFileHandler:function(e){k("onDropFileHandler called with evt = ".concat(JSON.stringify(e))),e.stopPropagation(),e.preventDefault();var t=e.dataTransfer.files;k("files = ".concat(JSON.stringify(t))),t&&t[0]&&this.parseFile(t[0])},onImportFileHandler:function(e){k("onImportFileHandler called with evt = ".concat(JSON.stringify(e)));var t=e.target.files;k("files = ".concat(t)),t&&t[0]&&this.parseFile(t[0])},parseFileAbort:function(e){this.showAlert(this.alert.main,e,"warning"),this.$refs.importfile.value=null,this.$refs.fileinputzone.classList.remove("fileInputZoneDragOver")},parseFile:function(e){var t=this;if(k("parseFile called with ".concat(JSON.stringify(e)," -- file name is ").concat(e.name)),this.input.validFileExt.indexOf(e.name.split(".").pop())<0)this.parseFileAbort("Invalid input file type.");else{var a=new FileReader;a.onload=function(e){var a,i=e.target.result,s=m.a.read(i,{type:"binary"}),l=s.SheetNames[0],n=s.Sheets[l],r=m.a.utils.sheet_to_json(n,{header:1}),o=(t.makeCols(n["!ref"]),[]),d=[],u=0,h=[],b=["[ITEM]","[COST]","[TAXED]","[CLAIM]","[PAID]"],f={},v=!1,x=!1,y=!1,g=!1,C=!1,w=!1,_=!1,P=Object(p["a"])(r);try{for(P.s();!(a=P.n()).done;){var I=a.value;if(k(I),I=I.map((function(e){return Object(c["a"])(e)===String?e.trim():e})),I.length>0){var S=String(I[0]).trim();if(S.length>0&&"["===S[0])if(S=S.toUpperCase(),"[LABEL]"===S){if(x)return void t.parseFileAbort("Duplicated label input.");if(w)return void t.parseFileAbort("Label appear before item list.");for(var A=1;A<I.length;++A){var M=String(I[A]);if(M.length>1)return void t.parseFileAbort("Label must be one character.");o.push(M)}x=!0}else if("[PEOPLE]"===S){if(y)return void t.parseFileAbort("Duplicated people input.");if(w)return void t.parseFileAbort("People appear before item list.");for(var F=1;F<I.length;++F){if(""===I[F])return void t.parseFileAbort("People name should not be empty.");var E=String(I[F]);d.push(E)}if(I.length-1>t.people.maxCount)return void t.parseFileAbort("People exceeds capacity (".concat(t.people.maxCount,")."));y=!0}else if("[TAXRATE]"===S||"[TAX]"==S){if(g)return void t.parseFileAbort("Duplicated tax rate input.");if(w)return void t.parseFileAbort("Tax rate must appear before item list.");if(I.length<2)return void t.parseFileAbort("Missing tax rate input.");if(u=Number(I[1]),isNaN(u)||u<0)return void t.parseFileAbort("Invalid tax rate input.");g=!0}else if("[TOTAL]"===S);else{if(!(b.indexOf(S)>=0))return void t.parseFileAbort("Invalid command ".concat(S,"."));if(C)return void t.parseFileAbort("Duplicated rows of item input title.");if(w)return void t.parseFileAbort("Item input title row must appear before item list.");var H,T=[],O=Object(p["a"])(I);try{for(O.s();!(H=O.n()).done;){var D=H.value;if(D=D.toUpperCase(),b.indexOf(D)<0)return void t.parseFileAbort("Invalid input key ".concat(D,"."));if(T.indexOf(D)>=0)return void t.parseFileAbort("Duplicated input key ".concat(D,"."));"[PAID]"===D&&(v=!0),T.push(D)}}catch(ee){O.e(ee)}finally{O.f()}b=T,C=!0}else{if(!1===w){if(w=!0,y&&!x)return void t.parseFileAbort("Must indicate labels for each person with [LABEL] row.");if(!y&&x?(d=o,y=!0):y||x||(_=!0),d.length!==d.length)return void t.parseFileAbort("Label and people must have the same length.");for(var L in o)f[o[L]]=L}I.length>4&&(v=!0);var N,B={name:"Item ".concat(h.length+1),cost:0,taxed:!1,claim:{},paid:{}},z=Object(p["a"])(o);try{for(z.s();!(N=z.n()).done;){var R=N.value;B.claim[R]=0,B.paid[R]=0}}catch(ee){z.e(ee)}finally{z.f()}for(var $=0;$<I.length;++$)if("[ITEM]"===b[$])B.name=I[$];else if("[COST]"===b[$]){if(B.cost=Number(I[$]),isNaN(B.cost))return void t.parseFileAbort("".concat(B.name," has invalid cost."))}else if("[TAXED]"===b[$]){var j=String(I[$]).toUpperCase();if("T"==j[0]||"Y"==j[0]||"1"==j[0])B.taxed=!0;else{if("F"!=j[0]&&"N"!=j[0]&&"0"!=j[0])return void t.parseFileAbort("".concat(B.name," has invalid taxed info."));B.taxed=!1}}else if("[CLAIM]"===b[$]){if(void 0===I[$])continue;I[$]=String(I[$]);for(var U=0;U<I[$].length;++U){var X=I[$][U];if(o.indexOf(X)>-1)X in B.claim?B.claim[X]+=1:B.claim[X]=1;else{if(!_)return void t.parseFileAbort("Unknown claim label ".concat(X," found for ").concat(B.name,"."));B.claim[X]=1,B.paid[X]=0,o.push(X),d.push(X)}}}else if("[PAID]"===b[$]){if(void 0===I[$])continue;I[$]=String(I[$]);for(var J=0;J<I[$].length;++J){var q=I[$][J];if(o.indexOf(q)>-1)q in B.paid?B.paid[q]+=1:B.paid[q]=1;else{if(!_)return void t.parseFileAbort("Unknown paid label ".concat(q," found for ").concat(B.name,"."));B.paid[q]=1,B.claim[q]=0,o.push(q),d.push(q)}}}h.push(B)}}}}catch(ee){P.e(ee)}finally{P.f()}t.resetAll(),t.input.taxRate=u,t.input.enablePaidByMode=v,t.input.enablePaidByMode&&t.turnOnEnablePaidByMode();var G,W=Object(p["a"])(d);try{for(W.s();!(G=W.n()).done;){var V=G.value;t.people.toAdd=V,t.onAddPersonHandler()}}catch(ee){W.e(ee)}finally{W.f()}for(var Z in h){var Y=h[Z];for(var K in t.onAddItemHandler(),t.input.items[t.input.items.length-1].name=t.itemNameFormatter(Y.name),t.input.items[t.input.items.length-1].cost=Y.cost,t.input.items[t.input.items.length-1].taxed=Y.taxed,t.people.idList){var Q=t.people.idList[K];t.people.details[Q].claim[Z]=Y.claim[o[K]],t.people.details[Q].paid[Z]=Y.paid[o[K]],_&&(void 0===t.people.details[Q].claim[Z]&&(t.people.details[Q].claim[Z]=0),void 0===t.people.details[Q].paid[Z]&&(t.people.details[Q].paid[Z]=0))}}},a.readAsBinaryString(e)}},makeCols:function(e){return Array(m.a.utils.decode_range(e).e.c+1).fill(0).map((function(e,t){return{name:m.a.utils.encode_col(t),key:t}}))},resetAll:function(){this.clearResults(),this.input.taxRate=0,this.input.enablePaidByMode=!1;while(this.input.items.length>0)this.onDeleteItemHandler(this.input.items.length-1);while(this.people.idList.length>0)this.onDeletePersonHandler(this.people.idList.length-1);this.people.idIdle.sort()},saveDataCookies:function(){k("saveCookie called");this.$data;this.$cookies.set("input",this.input),this.$cookies.set("people",this.people)},loadDataCookies:function(){k("loadCookie called");var e=this.$cookies.get("input"),t=this.$cookies.get("people");Object.assign(this.input,e),Object.assign(this.people,t),this.input.enablePaidByMode&&this.turnOnEnablePaidByMode()},removeDataCookies:function(){k("removeCookie called"),this.$cookies.remove("input"),this.$cookies.remove("people")},onDummyClickedHandler:function(e,t,a){k("dummy button clicked with x = ".concat(e,", y = ").concat(t,", z = ").concat(a))}},components:{CounterWidget:g}},S=I,A=(a("94b5"),Object(x["a"])(S,o,d,!1,null,null,null)),M=A.exports,F={name:"app",components:{BillSpliter:M}},E=F,H=(a("034f"),Object(x["a"])(E,n,r,!1,null,null,null)),T=H.exports,O=a("2b27"),D=a.n(O);i["default"].config.productionTip=!1,i["default"].use(s["a"]),i["default"].use(l["a"]),i["default"].use(D.a),i["default"].$cookies.config("GUABillSpliter"),i["default"].$cookies.config("1d"),new i["default"]({render:function(e){return e(T)}}).$mount("#app")},"85ec":function(e,t,a){},"94b5":function(e,t,a){"use strict";var i=a("d11f"),s=a.n(i);s.a},d11f:function(e,t,a){}});
//# sourceMappingURL=app.89b43be1.js.map