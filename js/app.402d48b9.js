(function(e){function t(t){for(var i,n,l=t[0],o=t[1],d=t[2],c=0,u=[];c<l.length;c++)n=l[c],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&u.push(s[n][0]),s[n]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i]);p&&p(t);while(u.length)u.shift()();return r.push.apply(r,d||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],i=!0,l=1;l<a.length;l++){var o=a[l];0!==s[o]&&(i=!1)}i&&(r.splice(t--,1),e=n(n.s=a[0]))}return e}var i={},s={app:0},r=[];function n(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=i,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/BillSpliter/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],o=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var p=o;r.push([1,"chunk-vendors"]),a()})({0:function(e,t){},"034f":function(e,t,a){"use strict";var i=a("85ec"),s=a.n(i);s.a},1:function(e,t,a){e.exports=a("56d7")},2:function(e,t){},3:function(e,t){},"33f0":function(e,t,a){e.exports=a.p+"img/android-chrome-192x192.8c6d0221.png"},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("0cdd");var i=a("2b0e"),s=a("5f5b"),r=a("b1e0");a("f9e3"),a("2dd8"),a("ab8b");i["default"].use(s["b"]);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("BillSpliter")],1)},l=[],o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-container",{attrs:{fluid:""}},[i("b-alert",{staticClass:"position-fixed fixed-top mt-1 mx-2 rounded-3",attrs:{variant:e.alert.main.variant,show:e.alert.main.countDown,dismissible:"",fade:""},on:{"dismiss-count-down":e.onAlertMainCountDownChanged}},[e._v(" "+e._s(e.alert.main.message)+" ")]),i("b-sidebar",{attrs:{id:"sidebar-people",right:"",shadow:"",backdrop:"","no-header":""}},[i("b-alert",{staticClass:"position-fixed fixed-top mt-1 mx-2 rounded-3",attrs:{variant:e.alert.sidebar.variant,show:e.alert.sidebar.countDown,dismissible:"",fade:""},on:{"dismiss-count-down":e.onAlertSideBarCountDownChanged}},[e._v(" "+e._s(e.alert.sidebar.message)+" ")]),i("div",{staticClass:"m-3 text-left"},[i("h4",[e._v("People")])]),i("div",{staticClass:"m-2 text-right"},[i("b-input-group",[i("b-form-input",{attrs:{type:"text",formatter:e.peopleNameFormatter},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onAddPersonHandler(t)}},model:{value:e.people.toAdd,callback:function(t){e.$set(e.people,"toAdd",t)},expression:"people.toAdd"}}),i("b-input-group-append",[i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:"Add person",expression:"'Add person'",modifiers:{hover:!0}}],attrs:{size:"sm",variant:"success"},on:{click:e.onAddPersonHandler}},[i("b-icon",{attrs:{icon:"person-plus"}})],1)],1)],1)],1),e._l(e.people.idList,(function(t,a){return i("div",{key:a,staticClass:"mt-2 mx-3"},[i("b-row",[i("b-col",{staticClass:"text-left",attrs:{cols:"10"}},[i("h3",[i("b-badge",{class:e.people.details[t].personClass},[e._v(" "+e._s(e.people.details[t].name)+" ")])],1)]),i("b-col",{staticClass:"text-right",attrs:{cols:"2"}},[i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:"Remove person",expression:"'Remove person'",modifiers:{hover:!0}}],staticClass:"mt-1",attrs:{size:"sm",variant:"danger"},on:{click:function(t){return e.onDeletePersonHandler(a)}}},[i("b-icon",{attrs:{icon:"trash"}})],1)],1)],1)],1)}))],2),i("b-modal",{attrs:{title:e.modalShareTitle,"ok-only":"","header-bg-variant":"dark","header-text-variant":"light"},on:{hidden:e.onCloseModalShareHandler},model:{value:e.modal.share.show,callback:function(t){e.$set(e.modal.share,"show",t)},expression:"modal.share.show"}},[i("b-container",{attrs:{fluid:""}},[i("b-row",{staticClass:"mb-1 text-center border-danger"},[i("b-col",{attrs:{cols:"8"}}),i("b-col",[e._v("Share")])],1),e._l(e.people.idList,(function(t,a){return i("div",{key:a},[i("b-row",{staticClass:"mb-1 text-center"},[i("b-col",{attrs:{cols:"8"}},[i("div",{staticClass:"h3 text-left"},[i("b-badge",{class:e.people.details[t].personClass},[e._v(" "+e._s(e.people.details[t].name)+" ")])],1)]),i("b-col",["Claim"===e.modal.share.mode?i("div",{staticClass:"text-right"},[i("b-form-input",{attrs:{type:"number","lazy-formatter":"",formatter:e.modalShareFormatter,number:""},model:{value:e.people.details[t].claim[e.modal.share.itemIndex],callback:function(a){e.$set(e.people.details[t].claim,e.modal.share.itemIndex,a)},expression:"people.details[personId].claim[modal.share.itemIndex]"}})],1):i("div",{staticClass:"text-right"},[i("b-form-input",{attrs:{type:"number","lazy-formatter":"",formatter:e.modalShareFormatter,number:""},model:{value:e.people.details[t].paid[e.modal.share.itemIndex],callback:function(a){e.$set(e.people.details[t].paid,e.modal.share.itemIndex,a)},expression:"people.details[personId].paid[modal.share.itemIndex]"}})],1)])],1)],1)}))],2)],1),i("b-modal",{attrs:{title:"Details","ok-only":"",size:"lg","header-bg-variant":"dark","header-text-variant":"light"},on:{hidden:function(t){e.modal.details.show=!1}},model:{value:e.modal.details.show,callback:function(t){e.$set(e.modal.details,"show",t)},expression:"modal.details.show"}},[i("b-container",{attrs:{fluid:""}},[i("b-table",{attrs:{outlined:"",hover:"",items:e.result.summary,fields:e.result.fields},scopedSlots:e._u([{key:"head(personId)",fn:function(){return[i("div",{staticClass:"h5 text-left"},[e._v(" Person ")])]},proxy:!0},{key:"cell(personId)",fn:function(t){return[i("div",{staticClass:"text-left"},[i("b-avatar",{class:e.people.details[t.item.personId].personClass,attrs:{text:e.people.details[t.item.personId].initial}})],1)]}},{key:"head(payable)",fn:function(){return[i("div",{staticClass:"h5 text-right"},[e._v(" Payable ")])]},proxy:!0},{key:"cell(payable)",fn:function(t){return[i("div",{staticClass:"h5 text-right"},[e._v(" $"+e._s(t.item.payable.toFixed(e.result.precision))+" ")])]}},{key:"head(paid)",fn:function(){return[i("div",{staticClass:"h5 text-right"},[e._v(" Paid ")])]},proxy:!0},{key:"cell(paid)",fn:function(t){return[i("div",{staticClass:"h5 text-right"},[e._v(" $"+e._s(t.item.paid.toFixed(e.result.precision))+" ")])]}},{key:"head(netPayable)",fn:function(){return[i("div",{staticClass:"h5 text-right"},[e._v(" Net Payable ")])]},proxy:!0},{key:"cell(netPayable)",fn:function(t){return[i("div",{staticClass:"h5 text-right"},[e._v(" $"+e._s(t.item.netPayable.toFixed(e.result.precision))+" ")])]}},{key:"cell(action)",fn:function(t){return[i("div",{staticClass:"h5 text-right"},[i("b-button",{attrs:{size:"sm"},on:{click:t.toggleDetails}},[e._v(" Details ")])],1)]}},{key:"row-details",fn:function(t){return e._l(e.input.items,(function(a,s){return i("b-list-group",{key:s,staticClass:"h6"},[i("b-list-group-item",[i("b-row",[i("b-col",{staticClass:"text-left",attrs:{cols:"5"}},[e._v(" "+e._s(a.name)+" "),i("b-badge",{attrs:{variant:"info",size:"lg"}},[e._v(" $"+e._s(e.result.taxAdaptedCost[s].toFixed(e.result.precision))+" ")])],1),i("b-col",{staticClass:"text-right",attrs:{cols:"3"}},[e.result.payableMap[t.item.personId][s].share>0?i("span",[e._v(" claimed "),e.result.payableMap[t.item.personId][s].share===e.result.totalClaimShare[s]?i("span",[e._v(" fully ")]):i("span",[e._v(" "+e._s(e.result.payableMap[t.item.personId][s].share)+"/"+e._s(e.result.totalClaimShare[s])+" ")]),i("b-badge",{attrs:{variant:"danger",size:"lg"}},[e._v(" $"+e._s(e.result.payableMap[t.item.personId][s].cost.toFixed(e.result.precision))+" ")])],1):e._e()]),i("b-col",{staticClass:"text-right",attrs:{cols:"3"}},[e.input.enablePaidByMode?i("span",[e.result.paidMap[t.item.personId][s].share>0?i("span",[e._v(" paid "),e.result.paidMap[t.item.personId][s].share===e.result.totalPaidShare[s]?i("span",[e._v(" fully ")]):i("span",[e._v(" "+e._s(e.result.paidMap[t.item.personId][s].share)+"/"+e._s(e.result.totalPaidShare[s])+" ")]),i("b-badge",{attrs:{variant:"success",size:"lg"}},[e._v(" $"+e._s(e.result.paidMap[t.item.personId][s].cost.toFixed(e.result.precision))+" ")])],1):e._e()]):e._e()])],1)],1)],1)}))}}])})],1)],1),i("div",{staticClass:"h1 text-primary"},[i("span",[i("b-img",{attrs:{src:a("33f0"),width:"64px",height:"64px"}})],1),e._v(" GUA -- An easy bill spliter ")]),i("b-row",[i("b-col",{staticClass:"text-left",attrs:{cols:"6"}},[i("span",{staticClass:"mx-1"},[i("b-button",{attrs:{variant:"primary"},on:{click:e.onAddItemHandler}},[i("b-icon",{attrs:{icon:"plus"}}),e._v(" Add Item ")],1)],1),i("span",{staticClass:"mx-1"},[i("b-button",{attrs:{variant:"primary"},on:{click:e.onCalculateHandler}},[i("b-icon",{attrs:{icon:"calculator-fill"}}),e._v(" Calculate ")],1)],1),i("span",{directives:[{name:"show",rawName:"v-show",value:e.result.calculated&&!e.result.dirty,expression:"result.calculated && !result.dirty"}],staticClass:"mx-1"},[i("b-button",{attrs:{variant:e.detailsVariant},on:{click:e.onDetailHandler}},[i("b-icon",{attrs:{icon:"journal-text"}}),e._v(" Details ")],1)],1),i("span",{directives:[{name:"show",rawName:"v-show",value:e.result.calculated&&!e.result.dirty&&e.result.consistent,expression:"result.calculated && !result.dirty && result.consistent"}],staticClass:"mx-1"},[i("b-dropdown",{attrs:{left:"",variant:"success"},scopedSlots:e._u([{key:"button-content",fn:function(){return[i("b-icon",{attrs:{icon:"download"}}),e._v(" Export ")]},proxy:!0}])},[i("b-dropdown-item-button",{on:{click:e.onExportXlsxHandler}},[e._v(".xlsx")])],1)],1)]),i("b-col",{staticClass:"text-right",attrs:{cols:"4"}},[e._l(e.people.idList,(function(t,a){return i("span",{key:a,staticClass:"mr-1"},[i("b-avatar",{class:e.people.details[t].personClass,attrs:{button:"",text:e.people.details[t].initial}})],1)})),i("span",[i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:"People List",expression:"'People List'",modifiers:{hover:!0}},{name:"b-toggle",rawName:"v-b-toggle.sidebar-people",modifiers:{"sidebar-people":!0}}],attrs:{variant:"primary"}},[i("b-icon",{attrs:{icon:"people-fill"}})],1)],1),i("span",{staticClass:"mx-1"},[i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:"Reset Everything",expression:"'Reset Everything'",modifiers:{hover:!0}}],attrs:{variant:"danger"},on:{click:e.resetAll}},[i("b-icon",{attrs:{icon:"trash-fill"}})],1)],1)],2),i("b-col",{staticClass:"text-right",attrs:{cols:"1"}},[i("b-img",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:"Tax rate",expression:"'Tax rate'",modifiers:{hover:!0}}],attrs:{src:a("de84"),width:"32px",height:"32px"}})],1),i("b-col",{staticClass:"text-right",attrs:{cols:"1"}},[i("b-input-group",{attrs:{size:"sm",append:"%",width:"10px"}},[i("b-form-input",{attrs:{type:"number","lazy-formatter":"",formatter:e.taxRateFormatter,placeholder:"Tax"},on:{change:function(t){e.result.dirty=!0}},model:{value:e.input.taxRate,callback:function(t){e.$set(e.input,"taxRate",t)},expression:"input.taxRate"}})],1)],1)],1),i("div",{staticClass:"mt-1"},[i("b-table",{attrs:{striped:"",hover:"",items:e.input.items,fields:e.input.fields},scopedSlots:e._u([{key:"cell(action)",fn:function(t){return[i("span",{staticClass:"mx-1"},[i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:"Delete item",expression:"'Delete item'",modifiers:{hover:!0}}],attrs:{variant:"danger",size:"sm"},on:{click:function(a){return e.onDeleteItemHandler(t.index)}}},[i("b-icon",{attrs:{icon:"trash"}})],1)],1),i("span",{staticClass:"mx-1"},[i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:"Reset item",expression:"'Reset item'",modifiers:{hover:!0}}],attrs:{variant:"warning",size:"sm"},on:{click:function(a){return e.onResetItemHandler(t.index)}}},[i("b-icon",{attrs:{icon:"arrow-counterclockwise"}})],1)],1)]}},{key:"cell(name)",fn:function(t){return[i("b-form-input",{attrs:{type:"text",formatter:e.itemNameFormatter},model:{value:t.item.name,callback:function(a){e.$set(t.item,"name",a)},expression:"row.item.name"}})]}},{key:"cell(cost)",fn:function(t){return[i("b-form-input",{attrs:{type:"number","lazy-formatter":"",formatter:e.itemCostFormatter},on:{change:function(t){e.result.dirty=!0}},model:{value:t.item.cost,callback:function(a){e.$set(t.item,"cost",a)},expression:"row.item.cost"}})]}},{key:"cell(taxed)",fn:function(t){return[i("b-checkbox",{attrs:{switch:"",size:"lg"},on:{change:function(t){e.result.dirty=!0}},model:{value:t.item.taxed,callback:function(a){e.$set(t.item,"taxed",a)},expression:"row.item.taxed"}})]}},{key:"cell(claim)",fn:function(t){return[i("div",{staticClass:"text-right"},[e._l(e.people.idList,(function(a,s){return i("span",{key:s,staticClass:"m-0"},[i("b-avatar",{directives:[{name:"show",rawName:"v-show",value:e.getItemClaimShare(a,t.index,String),expression:"getItemClaimShare(personId, row.index, String)"}],class:e.people.details[a].personClass,attrs:{"badge-top":"","badge-variant":"primary",badge:e.getItemClaimShare(a,t.index,String),text:e.people.details[a].initial}})],1)})),i("span",{staticClass:"m-1"},[i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:"Edit shares claimed",expression:"'Edit shares claimed'",modifiers:{hover:!0}}],attrs:{size:"sm",variant:"primary"},on:{click:function(a){return e.onOpenModalShareHandler(t,"Claim")}}},[i("b-icon",{attrs:{icon:"pencil-square"}})],1)],1)],2)]}},{key:"head(paidBy)",fn:function(t){return[i("b-form-checkbox",{attrs:{switch:""},on:{change:e.onToggleEnablePaidByModeHandler},model:{value:e.input.enablePaidByMode,callback:function(t){e.$set(e.input,"enablePaidByMode",t)},expression:"input.enablePaidByMode"}},[e._v(" Paid By ")])]}},{key:"cell(paidBy)",fn:function(t){return[i("div",{staticClass:"text-right"},[e._l(e.people.idList,(function(a,s){return i("span",{directives:[{name:"show",rawName:"v-show",value:e.input.enablePaidByMode,expression:"input.enablePaidByMode"}],key:s,staticClass:"m-0"},[i("b-avatar",{directives:[{name:"show",rawName:"v-show",value:e.getItemPaidShare(a,t.index,String),expression:"getItemPaidShare(personId, row.index, String)"}],class:e.people.details[a].personClass,attrs:{"badge-top":"","badge-left":"","badge-variant":"primary",badge:e.getItemPaidShare(a,t.index,String),text:e.people.details[a].initial}})],1)})),i("span",{staticClass:"m-1"},[i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:"Edit shares paid",expression:"'Edit shares paid'",modifiers:{hover:!0}}],attrs:{size:"sm",variant:"primary",disabled:!e.input.enablePaidByMode},on:{click:function(a){return e.onOpenModalShareHandler(t,"Paid")}}},[i("b-icon",{attrs:{icon:"pencil-square"}})],1)],1)],2)]}}])})],1),0==e.input.items.length?i("div",{staticClass:"mb-2"},[i("form",{staticClass:"mb-2"},[i("div",{ref:"fileinputzone",staticClass:"text-center fileInputZone mt-4",on:{drop:e.onDropFileHandler,dragenter:e.onDragEnterHandler,dragover:e.suppressAction,dragleave:e.onDragLeaveHandler}},[i("div",{staticClass:"my-2"},[i("svg",{staticClass:"bi bi-upload mt-4",attrs:{width:"4em",height:"4em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{"fill-rule":"evenodd",d:"M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"}}),i("path",{attrs:{"fill-rule":"evenodd",d:"M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z"}})])]),i("div",[i("input",{ref:"importfile",attrs:{type:"file",accept:e.acceptFiles},on:{change:e.onImportFileHandler}}),i("h2",[e._v("Upload .xlsx")])])])]),i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:"Examples for input file",expression:"'Examples for input file'",modifiers:{hover:!0}}],attrs:{variant:"primary"}},[e._v(" Example Input File ")])],1):e._e(),0==e.input.items.length?i("div"):e._e(),e.result.calculated?i("div",[i("hr"),i("div",{staticClass:"h1 my-2 text-left"},[e._v(" Results "),i("span",{staticClass:"h4"},[e._v(" (with "+e._s(e.input.taxRate)+"% tax rate) ")])]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.result.dirty,expression:"result.dirty"}],staticClass:"h5 text-left"},[i("b-icon",{attrs:{icon:"exclamation-circle-fill",variant:"danger"}}),e._v(" Input modified, recalculation may be necessary. ")],1),e.result.showTransferResult?i("div",{staticClass:"text-left"},e._l(e.result.transferScheme,(function(t,a){return i("div",{key:a,staticClass:"mt-3 h2"},[i("b-avatar",{class:e.people.details[t.from].personClass,attrs:{size:"sm",text:e.people.details[t.from].initial}}),i("b-icon",{staticClass:"ml-1",attrs:{icon:"arrow-right"}}),i("b-badge",{attrs:{variant:"dark"}},[e._v("$"+e._s(t.amount.toFixed(e.result.precision)))]),i("b-icon",{attrs:{icon:"arrow-right"}}),i("b-avatar",{class:e.people.details[t.to].personClass,attrs:{size:"sm",text:e.people.details[t.to].initial}})],1)})),0):e._e(),e.result.showPayableResult?i("div",{staticClass:"text-left"},e._l(e.result.summary,(function(t,a){return 0!==t.payable?i("div",{key:a,staticClass:"mt-3 h2"},[i("b-avatar",{class:e.people.details[t.personId].personClass,attrs:{size:"sm",text:e.people.details[t.personId].initial}}),i("b-icon",{staticClass:"ml-1",attrs:{icon:"arrow-right"}}),i("b-badge",{attrs:{variant:"dark"}},[e._v(" $"+e._s(t.payable.toFixed(e.result.precision))+" ")])],1):e._e()})),0):e._e(),i("div",{staticClass:"h2 mt-4 text-left"},[i("b-badge",{attrs:{variant:"light"}},[e._v(" Grand Total: $"+e._s(e.result.payableSum.toFixed(e.result.precision))+" ")])],1),i("hr")]):e._e(),i("div",{staticClass:"text-left h5"},[i("h2",[e._v("Input")]),i("div",[e._v(" tax: "+e._s(e.input.taxRate)+" % ")]),i("div",[e._v(" enablePaidByMode: "+e._s(e.input.enablePaidByMode)+" ")]),e._l(e.input.items,(function(t,a){return i("div",{key:Math.random()},[e._v(" "+e._s(t)+" ")])})),i("h2",[e._v("People")]),i("div",[e._v(" ids: "+e._s(e.people.idList)+" ")]),i("h3",[e._v("Details")]),e._l(e.people.idList,(function(t,a){return i("div",{key:Math.random()},[e._v(" "+e._s(e.people.details[t])+" ")])})),i("h2",[e._v("Result")]),i("div",[e._v(" result.calculated: "+e._s(e.result.calculated)+" ")]),i("div",[e._v(" result.consistent: "+e._s(e.result.consistent)+" ")]),i("div",[e._v(" result.dirty: "+e._s(e.result.dirty)+" ")]),i("div",[e._v(" showTransferResult: "+e._s(e.result.showTransferResult)+" ")]),i("div",[e._v(" showPayableResult: "+e._s(e.result.showPayableResult)+" ")]),i("h3",[e._v("Payable Map")]),e._l(e.result.payableMap,(function(t,a){return i("div",{key:Math.random()},[e._v(" "+e._s(a)+": "+e._s(t)+" ")])})),i("h3",[e._v("Total Claim Share")]),e._l(e.input.items,(function(t,a){return i("div",{key:Math.random()},[e._v(" "+e._s(e.getItemTotalClaimShare(a))+" ")])})),i("h3",[e._v("Paid Map")]),e._l(e.result.paidMap,(function(t,a){return i("div",{key:Math.random()},[e._v(" "+e._s(a)+": "+e._s(t)+" ")])})),i("div",[e._v(" result.payableSum: "+e._s(e.result.payableSum)+" ")]),i("div",[e._v(" result.paidSum: "+e._s(e.result.paidSum)+" ")]),i("div",[e._v(" result.costSum: "+e._s(e.result.costSum)+" ")]),i("h3",[e._v("Result Summary")]),e._l(e.result.summary,(function(t,a){return i("div",{key:Math.random()},[e._v(" "+e._s(t)+" ")])})),i("h3",[e._v("Transfer Scheme")]),e._l(e.result.transferScheme,(function(t,a){return i("div",{key:Math.random()},[e._v(" "+e._s(t)+" ")])}))],2)],1)},d=[],p=(a("99af"),a("cb29"),a("4160"),a("caad"),a("c975"),a("a15b"),a("d81d"),a("13d5"),a("fb6a"),a("45fc"),a("a434"),a("b0c0"),a("a9e3"),a("8ba4"),a("b680"),a("07ac"),a("ac1f"),a("2532"),a("38cf"),a("1276"),a("498a"),a("159b"),a("53ca")),c=a("b85c"),u=a("1146"),h=a.n(u),m=!0,f="TOTAL";function v(e){m&&console.log(e)}function b(){return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4))}function y(e){v("getTransferScheme called with ".concat(JSON.stringify(e)));var t=[];for(var a in e)a!=f&&t.push({person:a,netPayable:e[a]});t.sort((function(e,t){return e.netPayable>t.netPayable?-1:e.netPayable<t.netPayable?1:0}));var i=[],s=0,r=t.length-1;while(s<r)if(0===t[s].netPayable)s+=1;else if(0===t[r].netPayable)r-=1;else{var n=t[s].person,l=t[r].person,o=Math.min(t[s].netPayable,-t[r].netPayable);i.push({from:n,to:l,amount:o}),t[s].netPayable-=o,t[r].netPayable+=o}return i}var g={name:"BillSpliter",data:function(){return{input:{fields:[{key:"action",label:""},{key:"name",label:"Item",sortable:!0},{key:"cost",label:"Cost",sortable:!0},{key:"taxed",label:"Taxed"},{key:"claim",label:"Claim"},{key:"paidBy",label:"Paid By"}],items:[],taxRate:0,enablePaidByMode:!1,maxNameLen:30,validFileExt:["xlsx"]},result:{fields:[{key:"personId",label:"Person",sortable:!1},{key:"payable",label:"Payable",sortable:!1},{key:"action",label:"",sortable:!1}],summary:[],taxAdaptedCost:[],totalClaimShare:[],costPerClaimShare:[],totalPaidShare:[],costPerPaidShare:[],calculated:!1,consistent:!0,dirty:!1,payableMap:{},paidMap:{},transferScheme:[],payableSum:0,paidSum:0,costSum:0,precision:2,consistentTol:.01,showTransferResult:!1,showPayableResult:!1},alert:{main:{message:"",variant:"",countDown:0,initCountDown:3},sidebar:{message:"",variant:"",countDown:0,initCountDown:3},modalShare:{message:"",variant:"",countDown:0,initCountDown:3}},people:{maxNameLen:20,toAdd:"",maxCount:10,idList:[],idIdle:["0","1","2","3","4","5","6","7","8","9"],details:{0:{name:"",initial:"",personClass:"person-class-0",claim:[],paid:[]},1:{name:"",initial:"",personClass:"person-class-1",claim:[],paid:[]},2:{name:"",initial:"",personClass:"person-class-2",claim:[],paid:[]},3:{name:"",initial:"",personClass:"person-class-3",claim:[],paid:[]},4:{name:"",initial:"",personClass:"person-class-4",claim:[],paid:[]},5:{name:"",initial:"",personClass:"person-class-5",claim:[],paid:[]},6:{name:"",initial:"",personClass:"person-class-6",claim:[],paid:[]},7:{name:"",initial:"",personClass:"person-class-7",claim:[],paid:[]},8:{name:"",initial:"",personClass:"person-class-8",claim:[],paid:[]},9:{name:"",initial:"",personClass:"person-class-9",claim:[],paid:[]}}},modal:{share:{show:!1,itemIndex:null,mode:null},details:{show:!1}},env:{mobile:!1}}},computed:{modalShareTitle:function(){return v("modalShareTitle called with share.itemIndex = ".concat(this.modal.share.itemIndex)),this.modal.share.show&&Number.isInteger(this.modal.share.itemIndex)?"".concat(this.input.items[this.modal.share.itemIndex].name," -- ").concat(this.modal.share.mode):"TITLE -- ".concat(this.modal.share.mode)},detailsVariant:function(){return this.result.consistent?"success":"danger"},acceptFiles:function(){return this.input.validFileExt.map((function(e){return"."+e})).join(",")},mobile:function(){return b()}},mounted:function(){this.env.mobile=b()},methods:{onCalculateHandler:function(){if(v("onCalculateHandler called"),this.validateInput()){this.clearResults();var e,t=Object(c["a"])(this.people.idList);try{for(t.s();!(e=t.n()).done;){var a=e.value;this.result.payableMap[a]=[],this.result.paidMap[a]=[]}}catch(P){t.e(P)}finally{t.f()}for(var i in this.input.items){var s=this.input.items[i];this.result.taxAdaptedCost[i]=s.taxed?s.cost*(1+this.input.taxRate/100):s.cost,this.result.totalClaimShare.push(this.getItemTotalClaimShare(i)),this.result.costPerClaimShare[i]=this.result.taxAdaptedCost[i]/this.result.totalClaimShare[i];var r,n=Object(c["a"])(this.people.idList);try{for(n.s();!(r=n.n()).done;){var l=r.value,o=this.getItemClaimShare(l,i);this.result.payableMap[l].push({share:o,cost:o*this.result.costPerClaimShare[i]})}}catch(P){n.e(P)}finally{n.f()}if(this.input.enablePaidByMode){this.result.totalPaidShare.push(this.getItemTotalPaidShare(i)),this.result.costPerPaidShare[i]=this.result.taxAdaptedCost[i]/this.result.totalPaidShare[i];var d,p=Object(c["a"])(this.people.idList);try{for(p.s();!(d=p.n()).done;){var u=d.value,h=this.getItemPaidShare(u,i);this.result.paidMap[u].push({share:h,cost:h*this.result.costPerPaidShare[i]})}}catch(P){p.e(P)}finally{p.f()}}this.result.costSum+=this.result.taxAdaptedCost[i]}this.result.payableSum=0,this.result.paidSum=0;var m,f=Object(c["a"])(this.people.idList);try{for(f.s();!(m=f.n()).done;){var b=m.value,g=!1,x={personId:b};x.payable=this.result.payableMap[b].reduce((function(e,t){return 0!=t.share&&(g=!0),e+t.cost}),0),this.result.payableSum+=x.payable,this.input.enablePaidByMode&&(x.paid=this.result.paidMap[b].reduce((function(e,t){return 0!=t.share&&(g=!0),e+t.cost}),0),x.netPayable=x.payable-x.paid,this.result.paidSum+=x.paid),g&&this.result.summary.push(x)}}catch(P){f.e(P)}finally{f.f()}if(this.input.enablePaidByMode){var w,_={},C=Object(c["a"])(this.result.summary);try{for(C.s();!(w=C.n()).done;){var S=w.value;_[S.personId]=S.netPayable}}catch(P){C.e(P)}finally{C.f()}this.result.transferScheme=y(_)}this.result.calculated=!0,this.result.dirty=!1,this.result.consistent=Math.abs(this.result.payableSum-this.result.costSum)<this.result.consistentTol,this.result.consistent?(this.showAlert(this.alert.main,"Calculation done","success"),this.result.showTransferResult=this.input.enablePaidByMode,this.result.showPayableResult=!this.input.enablePaidByMode):this.showAlert(this.alert.main,"Inconsisitent results","warning")}},validateInput:function(){if(v("validateInput called"),this.input.taxRate<0)return this.showAlert(this.alert.main,"Invalid tax rate","danger"),!1;if(0===this.input.items.length)return this.showAlert(this.alert.main,"No item, no calculation needed","warning"),!1;for(var e in this.input.items){if(this.getItemTotalClaimShare(e)<=0)return this.showAlert(this.alert.main,"Someone must claim ".concat(this.input.items[e].name),"danger"),!1;if(this.input.enablePaidByMode&&this.getItemTotalPaidShare(e)<=0)return this.showAlert(this.alert.main,"Someone must pay for ".concat(this.input.items[e].name),"danger"),!1}return!0},clearResults:function(){v("clearResults called"),this.result.summary=[],this.result.taxAdaptedCost=[],this.result.totalClaimShare=[],this.result.costPerClaimShare=[],this.result.totalPaidShare=[],this.result.costPerPaidShare=[],this.result.calculated=!1,this.result.consistent=!0,this.result.dirty=!0,this.result.payableMap={},this.result.paidMap={},this.result.transferScheme=[],this.result.payableSum=0,this.result.paidSum=0,this.result.costSum=0},onAddItemHandler:function(){v("onAddItemHandler called");var e="Item ".concat(this.input.items.length+1),t=0,a=!1;this.input.items.push({name:e,cost:t,taxed:a}),Object.values(this.people.details).forEach((function(e){e.claim.push(0),e.paid.push(0)})),this.result.dirty=!0},onDeleteItemHandler:function(e){v("onDeleteItemHandler called with ".concat(e)),Object.values(this.people.details).forEach((function(t){t.claim.splice(e,1),t.paid.splice(e,1)})),this.input.items.splice(e,1),this.result.dirty=!0},onResetItemHandler:function(e){v("onResetItemHandler called with ".concat(e)),this.input.items[e].name="",this.input.items[e].cost=0,this.input.items[e].taxed=!1},showAlert:function(e,t,a){e.message=t,e.variant=a,e.countDown=e.initCountDown},onAlertMainCountDownChanged:function(e){this.alert.main.countDown=e},onAlertSideBarCountDownChanged:function(e){this.alert.sidebar.countDown=e},onAlertModalShareCountDownChanged:function(e){this.alert.modalShare.countDown=e},onAddPersonHandler:function(){if(v("onAddPersonHandler called"),this.people.toAdd=this.people.toAdd.trim(),this.people.toAdd){if(this.people.idList.length===this.people.maxCount)this.showAlert(this.alert.sidebar,"Max number reached","warning");else{v("adding ".concat(this.people.toAdd));var e=this.peopleNameFormatter(this.people.toAdd),t=e[0].toUpperCase();if(e.includes(" ")){var a=e.length-1;while(" "!==e[a-1])a-=1;t+=e[a]}var i=this.people.idIdle[0];this.people.idIdle.shift(),this.people.idList.push(i),this.people.details[i].name=e,this.people.details[i].initial=t,this.people.details[i].claim=new Array(this.input.items.length),this.people.details[i].paid=new Array(this.input.items.length),this.people.details[i].claim.fill(0),this.people.details[i].paid.fill(0)}this.people.toAdd=""}},onDeletePersonHandler:function(e){v("onDeletePersonHandler called with ".concat(e));var t=this.people.idList[e];this.people.idList.splice(e,1),this.people.idIdle.push(t),this.people.details[t].claim.some((function(e){return 0!==e}))&&(this.result.dirty=!0,this.result.showTransferResult=!1,this.result.showPayableResult=!1),this.people.details[t].paid.some((function(e){return 0!==e}))&&(this.result.dirty=!0,this.result.showTransferResult=!1,this.result.showPayableResult=!1)},onOpenModalShareHandler:function(e,t){v("onOpenModalShareHandler called with ".concat(JSON.stringify(e))),this.modal.share.show=!0,this.modal.share.itemIndex=e.index,this.modal.share.mode=t},onCloseModalShareHandler:function(){v("onCloseModalShareHandler called"),this.modal.share.show=!1,this.modal.share.itemIndex=void 0,this.modal.share.mode=void 0,this.result.dirty=!0},onToggleEnablePaidByModeHandler:function(){v("onToggleEnablePaidByModeHandler called"),this.input.enablePaidByMode?(this.result.showTransferResult=!1,this.result.showPayableResult=!0,this.result.fields.splice(3,1),this.result.fields.splice(1,1)):(this.result.dirty=!0,this.result.showTransferResult=!0,this.result.showPayableResult=!1,this.result.fields.splice(1,0,{key:"netPayable",label:"Net Payable",sortable:!1}),this.result.fields.splice(3,0,{key:"paid",label:"Paid",sortable:!1}))},onDetailHandler:function(){v("onDetailHandler called"),this.modal.details.show=!0},getItemClaimShare:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number,i=this.people.details[e].claim[t];return a===String?i>0&&String(i):i},getItemPaidShare:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number,i=this.people.details[e].paid[t];return a===String?i>0&&String(i):i},getItemTotalClaimShare:function(e){var t=this;return this.people.idList.reduce((function(a,i){return a+t.people.details[i].claim[e]}),0)},getItemTotalPaidShare:function(e){var t=this;return this.people.idList.reduce((function(a,i){return a+t.people.details[i].paid[e]}),0)},getDetailsStr:function(e,t){var a="",i=this.input.items[t],s=this.getItemTotalClaimShare(t),r=this.getItemClaimShare(e,t),n=this.getItemTotalPaidShare(t),l=this.getItemPaidShare(e,t),o=this.input.items[t].taxed,d=this.input.items[t].cost*(o?1+this.input.taxRate/100:1),p=r/s*d,c=l/n*d;return a+=r>0?"".concat(i.name," ($").concat(d.toFixed(this.result.precision),"): claimed ").concat(r,"/").concat(s," -- $ ").concat(p.toFixed(this.result.precision)):"".concat(i.name," ($").concat(d.toFixed(this.result.precision),"): not claimed"),this.input.enablePaidByMode&&(a+=l>0?", paid ".concat(l,"/").concat(n," -- $ ").concat(c.toFixed(this.result.precision)):", not paid"),a+"."},onExportXlsxHandler:function(){v("onExportXlsxHandler called");var e=h.a.utils.book_new(),t=["[LABEL]"],a=["[PEOPLE]"];for(var i in this.people.idList){var s=this.people.idList[i];t.push(i),a.push(this.people.details[s].name)}var r=0,n=[t,a];for(var l in n.push([]),n.push(["[TAXRATE]",this.input.taxRate]),n.push(["[ITEM]","[COST]","[TAXED]","[CLAIM]"]),this.input.enablePaidByMode&&n[n.length-1].push("[PAID]"),this.input.items){var o=this.input.items[l];r+=o.cost*(o.taxed?1+this.input.taxRate/100:1);var d=[o.name,o.cost.toFixed(this.result.precision),o.taxed?"T":"F"],p="",u="";for(var m in this.people.idList){var f=this.people.idList[m],b=this.people.details[f].claim[l];if(p+=String(m).repeat(b),this.input.enablePaidByMode){var y=this.people.details[f].paid[l];u+=String(m).repeat(y)}}d.push(p),this.input.enablePaidByMode&&d.push(u),n.push(d)}n.push([]),n.push(["[TOTAL]",r.toFixed(this.result.precision)]);var g=h.a.utils.aoa_to_sheet(n);if(h.a.utils.book_append_sheet(e,g,"Input"),this.result.calculated&&this.result.consistent&!this.result.dirty){var x=[];if(this.input.enablePaidByMode){x.push(["[PERSON]","[NET]","[PAYABLE]","[PAID]"]);var w,_=Object(c["a"])(this.result.summary);try{for(_.s();!(w=_.n()).done;){var C=w.value;x.push([this.people.details[C.personId].name,C.netPayable.toFixed(this.result.precision),C.payable.toFixed(this.result.precision),C.paid.toFixed(this.result.precision)])}}catch(T){_.e(T)}finally{_.f()}x.push([]),x.push(["[FROM]","[AMOUNT]","[TO]"]);var S,P=Object(c["a"])(this.result.transferScheme);try{for(P.s();!(S=P.n()).done;){var k=S.value;x.push([this.people.details[k.from].name,k.amount.toFixed(this.result.precision),this.people.details[k.to].name])}}catch(T){P.e(T)}finally{P.f()}}else{x.push(["[PERSON]","[PAYABLE]"]);var A,I=Object(c["a"])(this.result.summary);try{for(I.s();!(A=I.n()).done;){var M=A.value;x.push([this.people.details[M.personId].name,M.payable.toFixed(this.result.precision)])}}catch(T){I.e(T)}finally{I.f()}}var F=h.a.utils.aoa_to_sheet(x);h.a.utils.book_append_sheet(e,F,"Result")}h.a.writeFile(e,"BillSpliter.xlsx")},modalShareFormatter:function(e){if(!e)return 0;var t=Number(e);return Math.max(t,0)},peopleNameFormatter:function(e){return e.length>this.people.maxNameLen?e.slice(0,this.people.maxNameLen):e},itemNameFormatter:function(e){return e.length>this.input.maxNameLen?e.slice(0,this.input.maxNameLen):e},itemCostFormatter:function(e){return e?Number(e):0},taxRateFormatter:function(e){if(!e)return 0;var t=Number(e);return Math.min(Math.max(t,0),100)},onDragEnterHandler:function(e){this.$refs.fileinputzone.classList.add("fileInputZoneDragOver"),this.suppressAction(e)},onDragLeaveHandler:function(e){this.$refs.fileinputzone.classList.remove("fileInputZoneDragOver"),this.suppressAction(e)},suppressAction:function(e){v("suppressAction called with evt = ".concat(e)),e.stopPropagation(),e.preventDefault()},onDropFileHandler:function(e){v("onDropFileHandler called with evt = ".concat(JSON.stringify(e))),e.stopPropagation(),e.preventDefault();var t=e.dataTransfer.files;v("files = ".concat(JSON.stringify(t))),t&&t[0]&&this.parseFile(t[0])},onImportFileHandler:function(e){v("onImportFileHandler called with evt = ".concat(JSON.stringify(e)));var t=e.target.files;v("files = ".concat(t)),t&&t[0]&&this.parseFile(t[0])},parseFileAbort:function(e){this.showAlert(this.alert.main,e,"warning"),this.$refs.importfile.value=null,this.$refs.fileinputzone.classList.remove("fileInputZoneDragOver")},parseFile:function(e){var t=this;if(v("parseFile called with ".concat(JSON.stringify(e)," -- file name is ").concat(e.name)),this.input.validFileExt.indexOf(e.name.split(".").pop())<0)this.parseFileAbort("Invalid input file type.");else{var a=new FileReader;a.onload=function(e){var a,i=e.target.result,s=h.a.read(i,{type:"binary"}),r=s.SheetNames[0],n=s.Sheets[r],l=h.a.utils.sheet_to_json(n,{header:1}),o=(t.makeCols(n["!ref"]),[]),d=[],u=0,m=[],f=["[ITEM]","[COST]","[TAXED]","[CLAIM]","[PAID]"],b={},y=!1,g=!1,x=!1,w=!1,_=!1,C=!1,S=!1,P=Object(c["a"])(l);try{for(P.s();!(a=P.n()).done;){var k=a.value;if(v(k),k=k.map((function(e){return Object(p["a"])(e)===String?e.trim():e})),k.length>0){var A=String(k[0]).trim();if(A.length>0&&"["===A[0])if(A=A.toUpperCase(),"[LABEL]"===A){if(g)return void t.parseFileAbort("Duplicated label input.");if(C)return void t.parseFileAbort("Label appear before item list.");for(var I=1;I<k.length;++I){var M=String(k[I]);if(M.length>1)return void t.parseFileAbort("Label must be one character.");o.push(M)}g=!0}else if("[PEOPLE]"===A){if(x)return void t.parseFileAbort("Duplicated people input.");if(C)return void t.parseFileAbort("People appear before item list.");for(var F=1;F<k.length;++F){if(""===k[F])return void t.parseFileAbort("People name should not be empty.");var T=String(k[F]);d.push(T)}if(k.length-1>t.people.maxCount)return void t.parseFileAbort("People exceeds capacity (".concat(t.people.maxCount,")."));x=!0}else if("[TAXRATE]"===A||"[TAX]"==A){if(w)return void t.parseFileAbort("Duplicated tax rate input.");if(C)return void t.parseFileAbort("Tax rate must appear before item list.");if(k.length<2)return void t.parseFileAbort("Missing tax rate input.");if(u=Number(k[1]),isNaN(u)||u<0)return void t.parseFileAbort("Invalid tax rate input.");w=!0}else if("[TOTAL]"===A);else{if(!(f.indexOf(A)>=0))return void t.parseFileAbort("Invalid command ".concat(A,"."));if(_)return void t.parseFileAbort("Duplicated rows of item input title.");if(C)return void t.parseFileAbort("Item input title row must appear before item list.");var D,L=[],O=Object(c["a"])(k);try{for(O.s();!(D=O.n()).done;){var N=D.value;if(N=N.toUpperCase(),f.indexOf(N)<0)return void t.parseFileAbort("Invalid input key ".concat(N,"."));if(L.indexOf(N)>=0)return void t.parseFileAbort("Duplicated input key ".concat(N,"."));"[PAID]"===N&&(y=!0),L.push(N)}}catch(ee){O.e(ee)}finally{O.f()}f=L,_=!0}else{if(!1===C){if(C=!0,x&&!g)return void t.parseFileAbort("Must indicate labels for each person with [LABEL] row.");if(!x&&g?(d=o,x=!0):x||g||(S=!0),d.length!==d.length)return void t.parseFileAbort("Label and people must have the same length.");for(var R in o)b[o[R]]=R}k.length>4&&(y=!0);var H,E={name:"Item ".concat(m.length+1),cost:0,taxed:!1,claim:{},paid:{}},B=Object(c["a"])(o);try{for(B.s();!(H=B.n()).done;){var z=H.value;E.claim[z]=0,E.paid[z]=0}}catch(ee){B.e(ee)}finally{B.f()}for(var j=0;j<k.length;++j)if("[ITEM]"===f[j])E.name=k[j];else if("[COST]"===f[j]){if(E.cost=Number(k[j]),isNaN(E.cost))return void t.parseFileAbort("".concat(E.name," has invalid cost."))}else if("[TAXED]"===f[j]){var $=String(k[j]).toUpperCase();if("T"==$[0]||"Y"==$[0]||"1"==$[0])E.taxed=!0;else{if("F"!=$[0]&&"N"!=$[0]&&"0"!=$[0])return void t.parseFileAbort("".concat(E.name," has invalid taxed info."));E.taxed=!1}}else if("[CLAIM]"===f[j]){if(void 0===k[j])continue;k[j]=String(k[j]);for(var U=0;U<k[j].length;++U){var X=k[j][U];if(o.indexOf(X)>-1)X in E.claim?E.claim[X]+=1:E.claim[X]=1;else{if(!S)return void t.parseFileAbort("Unknown claim label ".concat(X," found for ").concat(E.name,"."));E.claim[X]=1,E.paid[X]=0,o.push(X),d.push(X)}}}else if("[PAID]"===f[j]){if(void 0===k[j])continue;k[j]=String(k[j]);for(var J=0;J<k[j].length;++J){var q=k[j][J];if(o.indexOf(q)>-1)q in E.paid?E.paid[q]+=1:E.paid[q]=1;else{if(!S)return void t.parseFileAbort("Unknown paid label ".concat(q," found for ").concat(E.name,"."));E.paid[q]=1,E.claim[q]=0,o.push(q),d.push(q)}}}m.push(E)}}}}catch(ee){P.e(ee)}finally{P.f()}t.resetAll(),t.input.taxRate=u,t.input.enablePaidByMode=y;var V,Z=Object(c["a"])(d);try{for(Z.s();!(V=Z.n()).done;){var Y=V.value;t.people.toAdd=Y,t.onAddPersonHandler()}}catch(ee){Z.e(ee)}finally{Z.f()}for(var G in m){var K=m[G];for(var Q in t.onAddItemHandler(),t.input.items[t.input.items.length-1].name=t.itemNameFormatter(K.name),t.input.items[t.input.items.length-1].cost=K.cost,t.input.items[t.input.items.length-1].taxed=K.taxed,t.people.idList){var W=t.people.idList[Q];t.people.details[W].claim[G]=K.claim[o[Q]],t.people.details[W].paid[G]=K.paid[o[Q]],S&&(void 0===t.people.details[W].claim[G]&&(t.people.details[W].claim[G]=0),void 0===t.people.details[W].paid[G]&&(t.people.details[W].paid[G]=0))}}},a.readAsBinaryString(e)}},makeCols:function(e){return Array(h.a.utils.decode_range(e).e.c+1).fill(0).map((function(e,t){return{name:h.a.utils.encode_col(t),key:t}}))},resetAll:function(){this.clearResults(),this.input.taxRate=0,this.input.enablePaidByMode=!1;while(this.input.items.length>0)this.onDeleteItemHandler(this.input.items.length-1);while(this.people.idList.length>0)this.onDeletePersonHandler(this.people.idList.length-1);this.people.idIdle.sort()}},components:{}},x=g,w=(a("94b5"),a("2877")),_=Object(w["a"])(x,o,d,!1,null,null,null),C=_.exports,S={name:"app",components:{BillSpliter:C}},P=S,k=(a("034f"),Object(w["a"])(P,n,l,!1,null,null,null)),A=k.exports;i["default"].config.productionTip=!1,i["default"].use(s["a"]),i["default"].use(r["a"]),new i["default"]({render:function(e){return e(A)}}).$mount("#app")},"85ec":function(e,t,a){},"94b5":function(e,t,a){"use strict";var i=a("d11f"),s=a.n(i);s.a},d11f:function(e,t,a){},de84:function(e,t,a){e.exports=a.p+"img/tax.a26408fb.png"}});
//# sourceMappingURL=app.402d48b9.js.map