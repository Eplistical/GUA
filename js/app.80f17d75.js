(function(e){function t(t){for(var s,r,n=t[0],o=t[1],d=t[2],u=0,p=[];u<n.length;u++)r=n[u],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&p.push(i[r][0]),i[r]=0;for(s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s]);c&&c(t);while(p.length)p.shift()();return l.push.apply(l,d||[]),a()}function a(){for(var e,t=0;t<l.length;t++){for(var a=l[t],s=!0,n=1;n<a.length;n++){var o=a[n];0!==i[o]&&(s=!1)}s&&(l.splice(t--,1),e=r(r.s=a[0]))}return e}var s={},i={app:0},l=[];function r(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=s,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(a,s,function(t){return e[t]}.bind(null,s));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/BillSpliter/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],o=n.push.bind(n);n.push=t,n=n.slice();for(var d=0;d<n.length;d++)t(n[d]);var c=o;l.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var s=a("85ec"),i=a.n(s);i.a},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("0cdd");var s=a("2b0e"),i=a("5f5b"),l=a("b1e0");a("ab8b"),a("2dd8");s["default"].use(i["b"]);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("BillSpliter")],1)},n=[],o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-container",{attrs:{fluid:""}},[s("b-alert",{staticClass:"position-fixed fixed-top mt-1 mx-2 rounded-3",attrs:{variant:e.alert.main.variant,show:e.alert.main.countDown,dismissible:"",fade:""},on:{"dismiss-count-down":e.onAlertMainCountDownChanged}},[e._v(" "+e._s(e.alert.main.message)+" ")]),s("b-sidebar",{attrs:{id:"sidebar-people",right:"",shadow:"",backdrop:"","no-header":""}},[s("b-alert",{staticClass:"position-fixed fixed-top mt-1 mx-2 rounded-3",attrs:{variant:e.alert.sidebar.variant,show:e.alert.sidebar.countDown,dismissible:"",fade:""},on:{"dismiss-count-down":e.onAlertSideBarCountDownChanged}},[e._v(" "+e._s(e.alert.sidebar.message)+" ")]),s("div",{staticClass:"m-3 text-left"},[s("h4",[e._v("People")])]),s("div",{staticClass:"m-2 text-right"},[s("b-input-group",[s("b-form-input",{attrs:{type:"text",formatter:e.sidebarPeopleFormatter},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onAddPersonHandler(t)}},model:{value:e.people.toAdd,callback:function(t){e.$set(e.people,"toAdd",t)},expression:"people.toAdd"}}),s("b-input-group-append",[s("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:"Add person",expression:"'Add person'",modifiers:{hover:!0}}],attrs:{size:"sm",variant:"success"},on:{click:e.onAddPersonHandler}},[s("b-icon",{attrs:{icon:"person-plus"}})],1)],1)],1)],1),e._l(e.people.idList,(function(t,a){return s("div",{key:a,staticClass:"mt-2 mx-3"},[s("b-row",[s("b-col",{staticClass:"text-left",attrs:{cols:"10"}},[s("h3",[s("b-badge",{class:e.people.details[t].personClass},[e._v(" "+e._s(e.people.details[t].name)+" ")])],1)]),s("b-col",{staticClass:"text-right",attrs:{cols:"2"}},[s("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:"Remove person",expression:"'Remove person'",modifiers:{hover:!0}}],staticClass:"mt-1",attrs:{size:"sm",variant:"danger"},on:{click:function(t){return e.onDeletePersonHandler(a)}}},[s("b-icon",{attrs:{icon:"trash"}})],1)],1)],1)],1)}))],2),s("b-modal",{attrs:{title:e.modalShareTitle,"ok-only":"","header-bg-variant":"dark","header-text-variant":"light"},on:{hidden:e.onCloseModalShareHandler},model:{value:e.modal.share.show,callback:function(t){e.$set(e.modal.share,"show",t)},expression:"modal.share.show"}},[s("b-container",{attrs:{fluid:""}},[s("b-row",{staticClass:"mb-1 text-center border-danger"},[s("b-col",{attrs:{cols:"8"}}),s("b-col",[e._v("Share")])],1),e._l(e.people.idList,(function(t,a){return s("div",{key:a},[s("b-row",{staticClass:"mb-1 text-center"},[s("b-col",{attrs:{cols:"8"}},[s("div",{staticClass:"h3 text-left"},[s("b-badge",{class:e.people.details[t].personClass},[e._v(" "+e._s(e.people.details[t].name)+" ")])],1)]),s("b-col",["Claim"===e.modal.share.mode?s("div",{staticClass:"text-right"},[s("b-form-input",{attrs:{type:"number","lazy-formatter":"",formatter:e.modalShareFormatter,number:""},model:{value:e.people.details[t].claim[e.modal.share.itemIndex],callback:function(a){e.$set(e.people.details[t].claim,e.modal.share.itemIndex,a)},expression:"people.details[personId].claim[modal.share.itemIndex]"}})],1):s("div",{staticClass:"text-right"},[s("b-form-input",{attrs:{type:"number","lazy-formatter":"",formatter:e.modalShareFormatter,number:""},model:{value:e.people.details[t].paid[e.modal.share.itemIndex],callback:function(a){e.$set(e.people.details[t].paid,e.modal.share.itemIndex,a)},expression:"people.details[personId].paid[modal.share.itemIndex]"}})],1)])],1)],1)}))],2)],1),s("b-modal",{attrs:{title:"Details","ok-only":"",size:"lg","header-bg-variant":"dark","header-text-variant":"light"},on:{hidden:function(t){e.modal.details.show=!1}},model:{value:e.modal.details.show,callback:function(t){e.$set(e.modal.details,"show",t)},expression:"modal.details.show"}},[s("b-container",{attrs:{fluid:""}},[s("b-table",{attrs:{outlined:"",hover:"",items:e.result.summary,fields:e.result.fields},scopedSlots:e._u([{key:"head(personId)",fn:function(){return[s("div",{staticClass:"h5 text-left"},[e._v(" Person ")])]},proxy:!0},{key:"cell(personId)",fn:function(t){return[s("div",{staticClass:"text-left"},[s("b-avatar",{class:e.people.details[t.item.personId].personClass,attrs:{text:e.people.details[t.item.personId].initial}})],1)]}},{key:"head(payable)",fn:function(){return[s("div",{staticClass:"h5 text-right"},[e._v(" Payable ")])]},proxy:!0},{key:"cell(payable)",fn:function(t){return[s("div",{staticClass:"h5 text-right"},[e._v(" $"+e._s(t.item.payable.toFixed(e.result.precision))+" ")])]}},{key:"head(paid)",fn:function(){return[s("div",{staticClass:"h5 text-right"},[e._v(" Paid ")])]},proxy:!0},{key:"cell(paid)",fn:function(t){return[s("div",{staticClass:"h5 text-right"},[e._v(" $"+e._s(t.item.paid.toFixed(e.result.precision))+" ")])]}},{key:"head(netPayable)",fn:function(){return[s("div",{staticClass:"h5 text-right"},[e._v(" Net Payable ")])]},proxy:!0},{key:"cell(netPayable)",fn:function(t){return[s("div",{staticClass:"h5 text-right"},[e._v(" $"+e._s(t.item.netPayable.toFixed(e.result.precision))+" ")])]}},{key:"cell(action)",fn:function(t){return[s("div",{staticClass:"h5 text-right"},[s("b-button",{attrs:{size:"sm"},on:{click:t.toggleDetails}},[e._v(" Details ")])],1)]}},{key:"row-details",fn:function(t){return e._l(e.input.items,(function(a,i){return s("b-list-group",{key:i,staticClass:"h6"},[s("b-list-group-item",[s("b-row",[s("b-col",{staticClass:"text-left",attrs:{cols:"5"}},[e._v(" "+e._s(a.name)+" "),s("b-badge",{attrs:{variant:"info",size:"lg"}},[e._v(" $"+e._s(e.result.taxAdaptedCost[i].toFixed(e.result.precision))+" ")])],1),s("b-col",{staticClass:"text-right",attrs:{cols:"3"}},[e.result.payableMap[t.item.personId][i].share>0?s("span",[e._v(" claimed "),e.result.payableMap[t.item.personId][i].share===e.result.totalClaimShare[i]?s("span",[e._v(" fully ")]):s("span",[e._v(" "+e._s(e.result.payableMap[t.item.personId][i].share)+"/"+e._s(e.result.totalClaimShare[i])+" ")]),s("b-badge",{attrs:{variant:"danger",size:"lg"}},[e._v(" $"+e._s(e.result.payableMap[t.item.personId][i].cost.toFixed(e.result.precision))+" ")])],1):e._e()]),s("b-col",{staticClass:"text-right",attrs:{cols:"3"}},[e.input.enablePaidByMode?s("span",[e.result.paidMap[t.item.personId][i].share>0?s("span",[e._v(" paid "),e.result.paidMap[t.item.personId][i].share===e.result.totalPaidShare[i]?s("span",[e._v(" fully ")]):s("span",[e._v(" "+e._s(e.result.paidMap[t.item.personId][i].share)+"/"+e._s(e.result.totalPaidShare[i])+" ")]),s("b-badge",{attrs:{variant:"success",size:"lg"}},[e._v(" $"+e._s(e.result.paidMap[t.item.personId][i].cost.toFixed(e.result.precision))+" ")])],1):e._e()]):e._e()])],1)],1)],1)}))}}])})],1)],1),s("div",{staticClass:"h1 text-primary"},[e._v(" Bill Spliter ")]),s("b-row",[s("b-col",{staticClass:"text-left",attrs:{cols:"6"}},[s("span",{staticClass:"mx-2"},[s("b-button",{attrs:{variant:"primary"},on:{click:e.onAddItemHandler}},[s("b-icon",{attrs:{icon:"plus"}}),e._v(" Add Item ")],1)],1),s("span",{staticClass:"mx-2"},[s("b-button",{attrs:{variant:"primary",disabled:!0},on:{click:e.onImportFileHandler}},[s("b-icon",{attrs:{icon:"upload"}}),e._v("Import File ")],1)],1),s("span",{staticClass:"mx-2"},[s("b-button",{attrs:{variant:"primary"},on:{click:e.onCalculateHandler}},[s("b-icon",{attrs:{icon:"calculator-fill"}}),e._v(" Calculate ")],1)],1),s("span",{directives:[{name:"show",rawName:"v-show",value:e.result.calculated&&!e.result.dirty,expression:"result.calculated && !result.dirty"}],staticClass:"mx-2"},[s("b-button",{attrs:{variant:e.detailsVariant},on:{click:e.onDetailHandler}},[s("b-icon",{attrs:{icon:"journal-text"}}),e._v(" Details ")],1)],1),s("span",{directives:[{name:"show",rawName:"v-show",value:e.result.calculated&&!e.result.dirty&&e.result.consistent,expression:"result.calculated && !result.dirty && result.consistent"}],staticClass:"mx-2"},[s("b-dropdown",{attrs:{left:"",variant:"success"},scopedSlots:e._u([{key:"button-content",fn:function(){return[s("b-icon",{attrs:{icon:"download"}}),e._v(" Export ")]},proxy:!0}])},[s("b-dropdown-item-button",{on:{click:e.onExportCsvHandler}},[e._v(".csv")]),s("b-dropdown-item-button",{on:{click:e.onExportXlsxHandler}},[e._v(".xlsx")])],1)],1)]),s("b-col",{staticClass:"text-right",attrs:{cols:"4"}},[e._l(e.people.idList,(function(t,a){return s("span",{key:a,staticClass:"mr-1"},[s("b-avatar",{class:e.people.details[t].personClass,attrs:{button:"",text:e.people.details[t].initial}})],1)})),s("span",[s("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:"People List",expression:"'People List'",modifiers:{hover:!0}},{name:"b-toggle",rawName:"v-b-toggle.sidebar-people",modifiers:{"sidebar-people":!0}}],attrs:{variant:"primary"}},[s("b-icon",{attrs:{icon:"people-fill"}})],1)],1)],2),s("b-col",{staticClass:"text-right",attrs:{cols:"1"}},[s("b-img",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:"Tax rate",expression:"'Tax rate'",modifiers:{hover:!0}}],attrs:{src:a("de84"),width:"32px",height:"32px"}})],1),s("b-col",{staticClass:"text-right",attrs:{cols:"1"}},[s("b-input-group",{attrs:{size:"sm",append:"%",width:"10px"}},[s("b-form-input",{attrs:{type:"number","lazy-formatter":"",formatter:e.taxRateFormatter,placeholder:"Tax"},on:{change:function(t){e.result.dirty=!0}},model:{value:e.input.taxRate,callback:function(t){e.$set(e.input,"taxRate",t)},expression:"input.taxRate"}})],1)],1)],1),s("div",{staticClass:"mt-1"},[s("b-table",{attrs:{striped:"",hover:"",items:e.input.items,fields:e.input.fields},scopedSlots:e._u([{key:"cell(action)",fn:function(t){return[s("span",{staticClass:"mx-1"},[s("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:"Delete item",expression:"'Delete item'",modifiers:{hover:!0}}],attrs:{variant:"danger",size:"sm"},on:{click:function(a){return e.onDeleteItemHandler(t.index)}}},[s("b-icon",{attrs:{icon:"trash"}})],1)],1),s("span",{staticClass:"mx-1"},[s("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:"Reset item",expression:"'Reset item'",modifiers:{hover:!0}}],attrs:{variant:"warning",size:"sm"},on:{click:function(a){return e.onResetItemHandler(t.index)}}},[s("b-icon",{attrs:{icon:"arrow-counterclockwise"}})],1)],1)]}},{key:"cell(name)",fn:function(t){return[s("b-form-input",{attrs:{type:"text",formatter:e.itemNameFormatter},model:{value:t.item.name,callback:function(a){e.$set(t.item,"name",a)},expression:"row.item.name"}})]}},{key:"cell(cost)",fn:function(t){return[s("b-form-input",{attrs:{type:"number","lazy-formatter":"",formatter:e.itemCostFormatter},on:{change:function(t){e.result.dirty=!0}},model:{value:t.item.cost,callback:function(a){e.$set(t.item,"cost",a)},expression:"row.item.cost"}})]}},{key:"cell(taxed)",fn:function(t){return[s("b-checkbox",{attrs:{switch:"",size:"lg"},on:{change:function(t){e.result.dirty=!0}},model:{value:t.item.taxed,callback:function(a){e.$set(t.item,"taxed",a)},expression:"row.item.taxed"}})]}},{key:"cell(claim)",fn:function(t){return[s("div",{staticClass:"text-right"},[e._l(e.people.idList,(function(a,i){return s("span",{key:i,staticClass:"m-0"},[s("b-avatar",{directives:[{name:"show",rawName:"v-show",value:e.getItemClaimShare(a,t.index,String),expression:"getItemClaimShare(personId, row.index, String)"}],class:e.people.details[a].personClass,attrs:{"badge-top":"","badge-variant":"primary",badge:e.getItemClaimShare(a,t.index,String),text:e.people.details[a].initial}})],1)})),s("span",{staticClass:"m-1"},[s("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:"Edit shares claimed",expression:"'Edit shares claimed'",modifiers:{hover:!0}}],attrs:{size:"sm",variant:"primary"},on:{click:function(a){return e.onOpenModalShareHandler(t,"Claim")}}},[s("b-icon",{attrs:{icon:"pencil-square"}})],1)],1)],2)]}},{key:"head(paidBy)",fn:function(t){return[s("b-form-checkbox",{attrs:{switch:""},on:{change:e.onToggleEnablePaidByModeHandler},model:{value:e.input.enablePaidByMode,callback:function(t){e.$set(e.input,"enablePaidByMode",t)},expression:"input.enablePaidByMode"}},[e._v(" Paid By ")])]}},{key:"cell(paidBy)",fn:function(t){return[s("div",{staticClass:"text-right"},[e._l(e.people.idList,(function(a,i){return s("span",{directives:[{name:"show",rawName:"v-show",value:e.input.enablePaidByMode,expression:"input.enablePaidByMode"}],key:i,staticClass:"m-0"},[s("b-avatar",{directives:[{name:"show",rawName:"v-show",value:e.getItemPaidShare(a,t.index,String),expression:"getItemPaidShare(personId, row.index, String)"}],class:e.people.details[a].personClass,attrs:{"badge-top":"","badge-left":"","badge-variant":"primary",badge:e.getItemPaidShare(a,t.index,String),text:e.people.details[a].initial}})],1)})),s("span",{staticClass:"m-1"},[s("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:"Edit shares paid",expression:"'Edit shares paid'",modifiers:{hover:!0}}],attrs:{size:"sm",variant:"primary",disabled:!e.input.enablePaidByMode},on:{click:function(a){return e.onOpenModalShareHandler(t,"Paid")}}},[s("b-icon",{attrs:{icon:"pencil-square"}})],1)],1)],2)]}}])})],1),e.result.calculated?s("div",[s("hr"),s("div",{staticClass:"h1 my-2 text-left"},[e._v(" Results "),s("span",{staticClass:"h4"},[e._v(" (with "+e._s(e.input.taxRate)+"% tax rate) ")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.result.dirty,expression:"result.dirty"}],staticClass:"h5 text-left"},[s("b-icon",{attrs:{icon:"exclamation-circle-fill",variant:"danger"}}),e._v(" Input modified, recalculation may be necessary. ")],1),e.result.showTransferResult?s("div",{staticClass:"text-left"},e._l(e.result.transferScheme,(function(t,a){return s("div",{key:a,staticClass:"mt-3 h2"},[s("b-avatar",{class:e.people.details[t.from].personClass,attrs:{size:"sm",text:e.people.details[t.from].initial}}),s("b-icon",{staticClass:"ml-1",attrs:{icon:"arrow-right"}}),s("b-badge",{attrs:{variant:"dark"}},[e._v("$"+e._s(t.amount.toFixed(e.result.precision)))]),s("b-icon",{attrs:{icon:"arrow-right"}}),s("b-avatar",{class:e.people.details[t.to].personClass,attrs:{size:"sm",text:e.people.details[t.to].initial}})],1)})),0):e._e(),e.result.showPayableResult?s("div",{staticClass:"text-left"},e._l(e.result.summary,(function(t,a){return 0!==t.payable?s("div",{key:a,staticClass:"mt-3 h2"},[s("b-avatar",{class:e.people.details[t.personId].personClass,attrs:{size:"sm",text:e.people.details[t.personId].initial}}),s("b-icon",{staticClass:"ml-1",attrs:{icon:"arrow-right"}}),s("b-badge",{attrs:{variant:"dark"}},[e._v(" $"+e._s(t.payable.toFixed(e.result.precision))+" ")])],1):e._e()})),0):e._e(),s("div",{staticClass:"h2 mt-4 text-left"},[s("b-badge",{attrs:{variant:"light"}},[e._v(" Grand Total: $"+e._s(e.result.payableSum.toFixed(e.result.precision))+" ")])],1),s("hr")]):e._e(),s("div",{staticClass:"text-left h5"})],1)},d=[],c=(a("99af"),a("cb29"),a("4160"),a("caad"),a("13d5"),a("fb6a"),a("45fc"),a("a434"),a("b0c0"),a("a9e3"),a("8ba4"),a("b680"),a("07ac"),a("2532"),a("498a"),a("159b"),a("b85c")),u=!0,p="TOTAL";function h(e){u&&console.log(e)}function m(e){h("getTransferScheme called with ".concat(JSON.stringify(e)));var t=[];for(var a in e)a!=p&&t.push({person:a,netPayable:e[a]});t.sort((function(e,t){return e.netPayable>t.netPayable?-1:e.netPayable<t.netPayable?1:0}));var s=[],i=0,l=t.length-1;while(i<l)if(0===t[i].netPayable)i+=1;else if(0===t[l].netPayable)l-=1;else{var r=t[i].person,n=t[l].person,o=Math.min(t[i].netPayable,-t[l].netPayable);s.push({from:r,to:n,amount:o}),t[i].netPayable-=o,t[l].netPayable+=o}return s}var b={name:"BillSpliter",data:function(){return{input:{fields:[{key:"action",label:""},{key:"name",label:"Item Name",sortable:!0},{key:"cost",label:"Cost",sortable:!0},{key:"taxed",label:"Taxed"},{key:"claim",label:"Share Claim"},{key:"paidBy",label:"Paid By"}],items:[],taxRate:0,enablePaidByMode:!1,maxNameLen:30},result:{fields:[{key:"personId",label:"Person",sortable:!1},{key:"payable",label:"Payable",sortable:!1},{key:"action",label:"",sortable:!1}],summary:[],taxAdaptedCost:[],totalClaimShare:[],costPerClaimShare:[],totalPaidShare:[],costPerPaidShare:[],calculated:!1,consistent:!0,dirty:!1,payableMap:{},paidMap:{},transferScheme:[],payableSum:0,paidSum:0,costSum:0,precision:2,consistentTol:.01,showTransferResult:!1,showPayableResult:!1},alert:{main:{message:"",variant:"",countDown:0,initCountDown:2},sidebar:{message:"",variant:"",countDown:0,initCountDown:2},modalShare:{message:"",variant:"",countDown:0,initCountDown:2}},people:{maxNameLen:20,toAdd:"",maxCount:10,idList:["0","1"],idIdle:["2","3","4","5","6","7","8","9"],details:{0:{name:"GM",initial:"GM",label:"0",personClass:"person-class-0",claim:[],paid:[]},1:{name:"HF",initial:"HF",label:"1",personClass:"person-class-1",claim:[],paid:[]},2:{name:"",initial:"",label:"2",personClass:"person-class-2",claim:[],paid:[]},3:{name:"",initial:"",label:"3",personClass:"person-class-3",claim:[],paid:[]},4:{name:"",initial:"",label:"4",personClass:"person-class-4",claim:[],paid:[]},5:{name:"",initial:"",label:"5",personClass:"person-class-5",claim:[],paid:[]},6:{name:"",initial:"",label:"6",personClass:"person-class-6",claim:[],paid:[]},7:{name:"",initial:"",label:"7",personClass:"person-class-7",claim:[],paid:[]},8:{name:"",initial:"",label:"8",personClass:"person-class-8",claim:[],paid:[]},9:{name:"",initial:"",label:"9",personClass:"person-class-9",claim:[],paid:[]}}},modal:{share:{show:!1,itemIndex:null,mode:null},details:{show:!1}}}},computed:{modalShareTitle:function(){return h("modalShareTitle called with share.itemIndex = ".concat(this.modal.share.itemIndex)),this.modal.share.show&&Number.isInteger(this.modal.share.itemIndex)?"".concat(this.input.items[this.modal.share.itemIndex].name," -- ").concat(this.modal.share.mode):"TITLE -- ".concat(this.modal.share.mode)},detailsVariant:function(){return this.result.consistent?"success":"danger"}},methods:{onCalculateHandler:function(){if(h("onCalculateHandler called"),this.validateInput()){this.clearResults();var e,t=Object(c["a"])(this.people.idList);try{for(t.s();!(e=t.n()).done;){var a=e.value;this.result.payableMap[a]=[],this.result.paidMap[a]=[]}}catch(_){t.e(_)}finally{t.f()}for(var s in this.input.items){var i=this.input.items[s];this.result.taxAdaptedCost[s]=i.taxed?i.cost*(1+this.input.taxRate/100):i.cost,this.result.totalClaimShare.push(this.getItemTotalClaimShare(s)),this.result.costPerClaimShare[s]=this.result.taxAdaptedCost[s]/this.result.totalClaimShare[s];var l,r=Object(c["a"])(this.people.idList);try{for(r.s();!(l=r.n()).done;){var n=l.value,o=this.getItemClaimShare(n,s);this.result.payableMap[n].push({share:o,cost:o*this.result.costPerClaimShare[s]})}}catch(_){r.e(_)}finally{r.f()}if(this.input.enablePaidByMode){this.result.totalPaidShare.push(this.getItemTotalPaidShare(s)),this.result.costPerPaidShare[s]=this.result.taxAdaptedCost[s]/this.result.totalPaidShare[s];var d,u=Object(c["a"])(this.people.idList);try{for(u.s();!(d=u.n()).done;){var p=d.value,b=this.getItemPaidShare(p,s);this.result.paidMap[p].push({share:b,cost:b*this.result.costPerPaidShare[s]})}}catch(_){u.e(_)}finally{u.f()}}this.result.costSum+=this.result.taxAdaptedCost[s]}this.result.payableSum=0,this.result.paidSum=0;var f,v=Object(c["a"])(this.people.idList);try{for(v.s();!(f=v.n()).done;){var y=f.value,x=!1,g={personId:y};g.payable=this.result.payableMap[y].reduce((function(e,t){return 0!=t.share&&(x=!0),e+t.cost}),0),this.result.payableSum+=g.payable,this.input.enablePaidByMode&&(g.paid=this.result.paidMap[y].reduce((function(e,t){return 0!=t.share&&(x=!0),e+t.cost}),0),g.netPayable=g.payable-g.paid,this.result.paidSum+=g.paid),x&&this.result.summary.push(g)}}catch(_){v.e(_)}finally{v.f()}if(this.input.enablePaidByMode){var C,w={},S=Object(c["a"])(this.result.summary);try{for(S.s();!(C=S.n()).done;){var P=C.value;w[P.personId]=P.netPayable}}catch(_){S.e(_)}finally{S.f()}this.result.transferScheme=m(w)}this.result.calculated=!0,this.result.dirty=!1,this.result.consistent=Math.abs(this.result.payableSum-this.result.costSum)<this.result.consistentTol,h(">> ".concat(this.result.payableSum," >>> ").concat(this.result.costSum)),this.result.consistent?(this.showAlert(this.alert.main,"Calculation done","success"),this.result.showTransferResult=this.input.enablePaidByMode,this.result.showPayableResult=!this.input.enablePaidByMode):this.showAlert(this.alert.main,"Inconsisitent results","warning")}},validateInput:function(){if(h("validateInput called"),this.input.taxRate<0)return this.showAlert(this.alert.main,"Invalid tax rate","danger"),!1;if(0===this.input.items.length)return this.showAlert(this.alert.main,"No item, no calculation needed","warning"),!1;for(var e in this.input.items){if(this.getItemTotalClaimShare(e)<=0)return this.showAlert(this.alert.main,"Someone must claim ".concat(this.input.items[e].name),"danger"),!1;if(this.input.enablePaidByMode&&this.getItemTotalPaidShare(e)<=0)return this.showAlert(this.alert.main,"Someone must pay for ".concat(this.input.items[e].name),"danger"),!1}return!0},clearResults:function(){h("clearResults called"),this.result.summary=[],this.result.taxAdaptedCost=[],this.result.totalClaimShare=[],this.result.costPerClaimShare=[],this.result.totalPaidShare=[],this.result.costPerPaidShare=[],this.result.calculated=!1,this.result.consistent=!0,this.result.dirty=!0,this.result.payableMap={},this.result.paidMap={},this.result.transferScheme=[],this.result.payableSum=0,this.result.paidSum=0,this.result.costSum=0},onAddItemHandler:function(){h("onAddItemHandler called");var e="Item ".concat(this.input.items.length+1),t=0,a=!1;this.input.items.push({name:e,cost:t,taxed:a}),Object.values(this.people.details).forEach((function(e){e.claim.push(0),e.paid.push(0)})),this.result.dirty=!0},onDeleteItemHandler:function(e){h("onDeleteItemHandler called with ".concat(e)),Object.values(this.people.details).forEach((function(t){t.claim.splice(e,1),t.paid.splice(e,1)})),this.input.items.splice(e,1),this.result.dirty=!0},onResetItemHandler:function(e){h("onResetItemHandler called with ".concat(e)),this.input.items[e].name="",this.input.items[e].cost=0,this.input.items[e].taxed=!1},showAlert:function(e,t,a){e.message=t,e.variant=a,e.countDown=e.initCountDown},onAlertMainCountDownChanged:function(e){this.alert.main.countDown=e},onAlertSideBarCountDownChanged:function(e){this.alert.sidebar.countDown=e},onAlertModalShareCountDownChanged:function(e){this.alert.modalShare.countDown=e},onAddPersonHandler:function(){if(h("onAddPersonHandler called"),this.people.toAdd=this.people.toAdd.trim(),this.people.toAdd){if(this.people.idList.length===this.people.maxCount)this.showAlert(this.alert.sidebar,"Max number reached","warning");else{h("adding ".concat(this.people.toAdd));var e=this.people.toAdd,t=e[0].toUpperCase();if(e.includes(" ")){var a=e.length-1;while(" "!==e[a-1])a-=1;t+=e[a]}var s=this.people.idIdle[0];this.people.idIdle.shift(),this.people.idList.push(s),this.people.details[s].name=e,this.people.details[s].initial=t,this.people.details[s].claim=new Array(this.input.items.length),this.people.details[s].paid=new Array(this.input.items.length),this.people.details[s].claim.fill(0),this.people.details[s].paid.fill(0)}this.people.toAdd=""}},onDeletePersonHandler:function(e){h("onDeletePersonHandler called with ".concat(e));var t=this.people.idList[e];this.people.idList.splice(e,1),this.people.idIdle.push(t),this.people.details[t].claim.some((function(e){return 0!==e}))&&(this.result.dirty=!0,this.result.showTransferResult=!1,this.result.showPayableResult=!1),this.people.details[t].paid.some((function(e){return 0!==e}))&&(this.result.dirty=!0,this.result.showTransferResult=!1,this.result.showPayableResult=!1)},onOpenModalShareHandler:function(e,t){h("onOpenModalShareHandler called with ".concat(JSON.stringify(e))),this.modal.share.show=!0,this.modal.share.itemIndex=e.index,this.modal.share.mode=t},onCloseModalShareHandler:function(){h("onCloseModalShareHandler called"),this.modal.share.show=!1,this.modal.share.itemIndex=void 0,this.modal.share.mode=void 0,this.result.dirty=!0},onToggleEnablePaidByModeHandler:function(){h("onToggleEnablePaidByModeHandler called"),this.input.enablePaidByMode?(this.result.showTransferResult=!1,this.result.showPayableResult=!0,this.result.fields.splice(3,1),this.result.fields.splice(1,1)):(this.result.dirty=!0,this.result.showTransferResult=!0,this.result.showPayableResult=!1,this.result.fields.splice(1,0,{key:"netPayable",label:"Net Payable",sortable:!1}),this.result.fields.splice(3,0,{key:"paid",label:"Paid",sortable:!1}))},onDetailHandler:function(){h("onDetailHandler called"),this.modal.details.show=!0},getItemClaimShare:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number,s=this.people.details[e].claim[t];return a===String?s>0&&String(s):s},getItemPaidShare:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number,s=this.people.details[e].paid[t];return a===String?s>0&&String(s):s},getItemTotalClaimShare:function(e){var t=this;return this.people.idList.reduce((function(a,s){return a+t.people.details[s].claim[e]}),0)},getItemTotalPaidShare:function(e){var t=this;return this.people.idList.reduce((function(a,s){return a+t.people.details[s].paid[e]}),0)},getDetailsStr:function(e,t){var a="",s=this.input.items[t],i=this.getItemTotalClaimShare(t),l=this.getItemClaimShare(e,t),r=this.getItemTotalPaidShare(t),n=this.getItemPaidShare(e,t),o=this.input.items[t].taxed,d=this.input.items[t].cost*(o?1+this.input.taxRate/100:1),c=l/i*d,u=n/r*d;return a+=l>0?"".concat(s.name," ($").concat(d.toFixed(this.result.precision),"): claimed ").concat(l,"/").concat(i," -- $ ").concat(c.toFixed(this.result.precision)):"".concat(s.name," ($").concat(d.toFixed(this.result.precision),"): not claimed"),this.input.enablePaidByMode&&(a+=n>0?", paid ".concat(n,"/").concat(r," -- $ ").concat(u.toFixed(this.result.precision)):", not paid"),a+"."},onExportCsvHandler:function(){h("onExportCsvHandler called")},onExportXlsxHandler:function(){h("onExportXlsxHandler called")},onImportFileHandler:function(){h("onImportFileHandler called")},modalShareFormatter:function(e){if(!e)return 0;var t=Number(e);return Math.max(t,0)},sidebarPeopleFormatter:function(e){return e.length>this.people.maxNameLen?e.slice(0,e.length-1):e},itemNameFormatter:function(e){return e.length>this.input.maxNameLen?e.slice(0,e.length-1):e},itemCostFormatter:function(e){return e?Number(e):0},taxRateFormatter:function(e){if(!e)return 0;var t=Number(e);return Math.min(Math.max(t,0),100)}},components:{}},f=b,v=(a("94b5"),a("2877")),y=Object(v["a"])(f,o,d,!1,null,null,null),x=y.exports,g={name:"app",components:{BillSpliter:x}},C=g,w=(a("034f"),Object(v["a"])(C,r,n,!1,null,null,null)),S=w.exports,P=(a("f9e3"),a("0fae"),a("5c96")),_=a.n(P),I=a("b2d6"),k=a.n(I);s["default"].use(_.a,{locale:k.a}),s["default"].config.productionTip=!1,s["default"].use(i["a"]),s["default"].use(l["a"]),new s["default"]({render:function(e){return e(S)}}).$mount("#app")},"85ec":function(e,t,a){},"94b5":function(e,t,a){"use strict";var s=a("d11f"),i=a.n(s);i.a},d11f:function(e,t,a){},de84:function(e,t,a){e.exports=a.p+"img/tax.a26408fb.png"}});
//# sourceMappingURL=app.80f17d75.js.map